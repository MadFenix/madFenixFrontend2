import{u as d,a as g,b as f}from"./oesT2u4W.js";import{O as p,_,E as x,u as v,h as k,F as m,o as n,c as a,a as i,G as o,M as y,N as w,L as h}from"./hCLQA6P7.js";const N=p("/img/streams/notificationSong.ogg"),T=p("/img/streams/fenix_feliz.png"),U={middleware:"auth",data(){return{user:d(),settings:g(),serverMessage:f(),api:null,items:null,itemsInterval:null,itemsIntervalRemove:null,route:x(),accountParameterToUrl:""}},computed:{},mounted(){var r,c,s,u;this.setUserCookies(),this.accountParameterToUrl=this.route.params.account?this.route.params.account+"/":"",this.setConfigCookies(),v({title:"Notificaciones - "+((c=(r=this.user.config)==null?void 0:r.config)==null?void 0:c.name_ecosystem),meta:[{hid:"description",name:"description",content:"Notificaciones en "+((u=(s=this.user.config)==null?void 0:s.config)==null?void 0:u.name_ecosystem)}]});const{$api:e}=k();this.api=e,this.fetch();let t=this;window.addEventListener("keyup",function(l){t.fetch()})},methods:{removeItems(){this.items=null,window.document.getElementById("audioNotification").stop()},fetch(){this.api("/api/host/store/getLastProductOrders",{method:"GET"}).then(e=>{e.length>0&&(this.items=e,window.document.getElementById("audioNotification").play())}).catch(e=>e.message?this.serverMessage.setServerMessage(e.message):this.serverMessage.setServerMessage("Error.")),this.itemsInterval=setTimeout(this.fetch,6e4),this.itemsIntervalRemove=setTimeout(this.removeItems,15e3)},setConfigCookies(){let e=m.get(this.accountParameterToUrl.replace(/^\/+|\/+$/g,"")+"_config");if(e&&(e=JSON.parse(e)),e)this.user.setConfig(this.accountParameterToUrl,e);else try{this.user.fetchConfig(this.accountParameterToUrl)}catch{}},setUserCookies(){let e=m.get("token");if(e){this.user.setToken(e);let t=m.get("user");if(t)this.user.updateUser(JSON.parse(t));else{console.log("test");try{this.user.fetchUser()}catch{}}}}}},C={key:0,class:o("min-h-screen flex items-center justify-center bg-green-600 p-4")},S={key:0},b={class:o("w-[800px]")},M=["innerHTML"];function I(e,t,r,c,s,u){return s.user.user?(n(),a("div",C,[t[1]||(t[1]=i("audio",{id:"audioNotification"},[i("source",{src:N,type:"audio/ogg"})],-1)),s.items?(n(),a("div",S,[t[0]||(t[0]=i("div",{class:o("w-full items-center text-center")},[i("img",{src:T,class:o("mx-auto w-[250px]")})],-1)),(n(!0),a(y,null,w(s.items,l=>(n(),a("div",b,[i("div",{innerHTML:l,class:o("text-5xl font-bold text-white"),style:{"text-shadow":"-4px -4px 0 black, 4px -4px 0 black, -4px  4px 0 black, 4px  4px 0 black"}},null,8,M)]))),256))])):h("",!0)])):h("",!0)}const P=_(U,[["render",I]]);export{P as _};
