import{u as x,a as b,b as v}from"./DthS5N3A.js";import{_,u as y,e as k,f as m,n as w,m as T,c as o,a as t,F as f,r as g,h as u,d as p,o as a,q as d}from"./ThyOGqvN.js";const P={middleware:"auth",data(){return{user:x(),settings:b(),serverMessage:v(),api:null,storeDetails:null,showProductsModal:!1,imageItemsReveal:!1,videoNewItems:"/video/MadFenixLogoReveal.mp4",itemsPurchaseToShow:null}},mounted(){y({title:"Tienda - Mad Fénix",meta:[{hid:"description",name:"description",content:"Tienda en Mad Fénix."}],script:[{async:!0,src:"https://js.stripe.com/v3/buy-button.js"}]}),this.setUserCookies(),this.setBackground();const{$api:i}=k();this.api=i,this.getStoreDetails()},computed:{},methods:{revealImageItems(){this.imageItemsReveal=!0},setBackground(){document.getElementById("container-global").style.background="transparent url('/img/perfil/back_temp.jpg') no-repeat top center"},afterLogout(){m.remove("token"),m.remove("user"),this.user.setToken(""),this.user.setUserToNull(),this.user.removeUser(),setTimeout(()=>this.$router.push({path:"/login"}),2e3)},logout(){this.api("/api/logout",{method:"POST"}).then(()=>this.afterLogout()).catch(()=>this.afterLogout())},afterStoreDetails(i){this.storeDetails=i},getStoreDetails(){this.api("/api/store/details",{method:"GET"}).then(i=>this.afterStoreDetails(i)).catch(()=>this.logout())},openNewItems(i){i.nfts.length>0?(this.videoNewItems=i.video_purchase,this.itemsPurchaseToShow=i,i.video_purchase?this.imageItemsReveal=!1:this.imageItemsReveal=!0,this.showProductsModal=!0,i.video_purchase&&w(()=>{document.getElementById("video-storemadfenix").play()})):this.$router.push({path:"/perfil"}),this.getStoreDetails()},validateProduct(i){this.api("/api/store/validateProductOrder",{method:"POST",body:{product_order_id:i.id}}).then(s=>this.openNewItems(s)).catch(s=>s.message?s.message==="The given data was invalid."?this.serverMessage.setServerMessage("Datos inválidos."):this.serverMessage.setServerMessage(s.message):this.serverMessage.setServerMessage("Error."))},buyProduct(i,s,c){this.api("/api/store/addProductToOrder",{method:"POST",body:{product_id:i}}).then(n=>{(s>0||c>0)&&this.validateProduct(n)}).catch(n=>n.message?n.message==="The given data was invalid."?this.serverMessage.setServerMessage("Datos inválidos."):this.serverMessage.setServerMessage(n.message):this.serverMessage.setServerMessage("Error."))},getPrice(i){return i.price_oro>0?'<span class="text-size-token-store">'+i.price_oro+"</span> oros":'<span class="text-size-token-store">'+i.price_plumas+"</span> plumas"},setUserCookies(){let i=m.get("token");if(i){this.user.setToken(i);let s=m.get("user");if(s)this.user.updateUser(JSON.parse(s));else{console.log("test");try{this.user.fetchUser()}catch{}}}}}},M={key:0},I={class:"relative z-30 grid grid-cols-1 sm:grid-cols-12 items-center justify-center mx-auto text-center px-4 sm:px-16 lg:flex-row lg:text-left"},S={class:"sm:col-span-3 flex items-center py-6 sm:py-0 px-12 h-full text-2xl rounded-tl-3xl rounded-tr-3xl sm:rounded-tr-none bg-madfenix-gris border border-madfenix-naranja sm:border-r-0 font-bold sm:text-4xl"},H=["src","title","alt"],L={class:"sm:col-span-9 px-3 sm:px-0 py-3 sm:py-0 sm:flex sm:items-center space-x-3 justify-center h-full rounded-br-3xl rounded-bl-3xl sm:rounded-bl-none bg-madfenix-gris border border-madfenix-naranja sm:border-l-0 sm:mr-12 lg:justify-end"},E={class:"grow font-extrabold tracking-tight"},R={class:"font-extrabold tracking-tight text-madfenix-naranja text-4xl sm:text-5xl"},U=["innerHTML"],N=["innerHTML"],z={class:"botones-tokens"},V={key:6,class:"flex cursor-pointer items-center justify-center w-auto px-8 py-4 text-base font-semibold leading-snug transition ease-in-out bg-white rounded-full h-14 duration-250 text-dark-900"},D=["onClick"],O=["innerHTML"],j={key:1,tabindex:"-1","aria-hidden":"true",class:"overflow-y-auto overflow-x-hidden bg-madfenix-gris bg-opacity-50 fixed top-0 right-0 left-0 z-50 w-full h-modal md:h-full"},C={class:"flex items-center justify-center p-4 w-full h-screen"},F={class:"bg-madfenix-gris text-madfenix-blanco rounded-lg shadow border border-madfenix-blanco"},B={class:"flex justify-between items-start p-4 rounded-t border-b border-madfenix-blanco"},G={class:"w-full p-3 overflow-y-auto",style:{height:"500px"}},A=["src"],X={key:1,class:"grid grid-cols-2 md:grid-cols-3 gap-2"},Q={class:"relative rounded-tr-3xl rounded-bl-3xl border-2 border-madfenix-naranja bg-madfenix-gris overflow-hidden"},J=["src","alt","title"],K=["innerHTML"];function W(i,s,c,n,r,h){const l=T("stripe-buy-button");return r.storeDetails?(a(),o("div",M,[s[6]||(s[6]=t("section",{class:"px-4 py-12 md:py-16 sm:px-6 lg:px-8"},[t("div",{class:"max-w-screen-xl mx-auto"},[t("div",{class:"w-full max-w-3xl mx-auto text-center lg:max-w-5xl"},[t("h1",{class:"mt-4 text-4xl font-extrabold text-madfenix-naranja md:mt-5 sm:text-5xl md:text-6xl",innerHTML:"Pasa al siguiente nivel"})])])],-1)),r.storeDetails.products?(a(!0),o(f,{key:0},g(r.storeDetails.products,e=>(a(),o("section",{class:"max-w-screen-xl px-4 py-12 mx-auto md:py-16 sm:px-6 lg:px-8",key:e.id},[t("div",I,[t("div",S,[t("img",{src:e.image,title:e.name,alt:e.name,class:"inset-y-0 z-40 h-full"},null,8,H)]),t("div",L,[t("div",E,[t("h5",R,[t("span",{innerHTML:e.name},null,8,U)]),e.short_description?(a(),o("p",{key:0,class:"text-madfenix-blanco text-xl",innerHTML:e.short_description},null,8,N)):u("",!0)]),t("div",z,[e.price_fiat>0&&e.price_fiat==5?(a(),d(l,{key:0,"buy-button-id":"buy_btn_1PAYYpHruUfPE2wuw5Mhazx8","publishable-key":"pk_live_51PAXsOHruUfPE2wuT1MTCc3LMcanaF77ZykWh93fUu8whnI6GLIFVfPcBSJVNTzGSiQtchKVsRu2kiziQlOD44XH006ERR5INg","customer-email":r.user.email},null,8,["customer-email"])):e.price_fiat>0&&e.price_fiat==10?(a(),d(l,{key:1,"buy-button-id":"buy_btn_1PAaDhHruUfPE2wuOkz0bx5C","publishable-key":"pk_live_51PAXsOHruUfPE2wuT1MTCc3LMcanaF77ZykWh93fUu8whnI6GLIFVfPcBSJVNTzGSiQtchKVsRu2kiziQlOD44XH006ERR5INg","customer-email":r.user.email},null,8,["customer-email"])):e.price_fiat>0&&e.price_fiat==20?(a(),d(l,{key:2,"buy-button-id":"buy_btn_1PAaEuHruUfPE2wu6DXK5KYT","publishable-key":"pk_live_51PAXsOHruUfPE2wuT1MTCc3LMcanaF77ZykWh93fUu8whnI6GLIFVfPcBSJVNTzGSiQtchKVsRu2kiziQlOD44XH006ERR5INg","customer-email":r.user.email},null,8,["customer-email"])):e.price_fiat>0&&e.price_fiat==40?(a(),d(l,{key:3,"buy-button-id":"buy_btn_1PAaI3HruUfPE2wu9m6H5vGp","publishable-key":"pk_live_51PAXsOHruUfPE2wuT1MTCc3LMcanaF77ZykWh93fUu8whnI6GLIFVfPcBSJVNTzGSiQtchKVsRu2kiziQlOD44XH006ERR5INg","customer-email":r.user.email},null,8,["customer-email"])):e.price_fiat>0&&e.price_fiat==80?(a(),d(l,{key:4,"buy-button-id":"buy_btn_1PAaHCHruUfPE2wua82AVGzY","publishable-key":"pk_live_51PAXsOHruUfPE2wuT1MTCc3LMcanaF77ZykWh93fUu8whnI6GLIFVfPcBSJVNTzGSiQtchKVsRu2kiziQlOD44XH006ERR5INg","customer-email":r.user.email},null,8,["customer-email"])):e.price_fiat>0&&e.price_fiat==160?(a(),d(l,{key:5,"buy-button-id":"buy_btn_1PAaJKHruUfPE2wuU9Jq0Nu9","publishable-key":"pk_live_51PAXsOHruUfPE2wuT1MTCc3LMcanaF77ZykWh93fUu8whnI6GLIFVfPcBSJVNTzGSiQtchKVsRu2kiziQlOD44XH006ERR5INg","customer-email":r.user.email},null,8,["customer-email"])):e.price_fiat>0?(a(),o("a",V," Próximamente ")):(a(),o("a",{key:7,onClick:Z=>h.buyProduct(e.id,e.price_oro,e.price_plumas),class:"w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer"},[s[2]||(s[2]=p(" Comprar por ")),t("span",{innerHTML:h.getPrice(e)},null,8,O)],8,D))])])])]))),128)):u("",!0),r.showProductsModal?(a(),o("div",j,[t("div",C,[t("div",F,[t("div",B,[s[4]||(s[4]=t("h3",{class:"text-xl font-semibold"}," ¡Tus nuevos ítems! ",-1)),t("button",{type:"button",onClick:s[0]||(s[0]=e=>{r.showProductsModal=!1,r.imageItemsReveal=!1}),class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white"},s[3]||(s[3]=[t("svg",{"aria-hidden":"true",class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),t("span",{class:"sr-only"},"Cerrar pantalla",-1)]))]),t("div",G,[r.imageItemsReveal?u("",!0):(a(),o("video",{key:0,id:"video-storemadfenix",class:"rounded rounded-3xl border border-2 border-madfenix-gris",playsinline:"",onEnded:s[1]||(s[1]=e=>h.revealImageItems())},[t("source",{src:r.videoNewItems,type:"video/mp4"},null,8,A),s[5]||(s[5]=p(" Tu navegador no soporta el video. "))],32)),r.imageItemsReveal&&r.itemsPurchaseToShow?(a(),o("div",X,[(a(!0),o(f,null,g(r.itemsPurchaseToShow.nfts,e=>(a(),o("div",{key:e.id},[t("div",Q,[t("img",{src:e.image,style:{width:"100%"},alt:e.name,title:e.name},null,8,J),t("div",{class:"px-6 mt-3 mb-10 relative z-50 w-full text-center text-madfenix-blanco",innerHTML:e.name},null,8,K)])]))),128))])):u("",!0)])])])])):u("",!0)])):u("",!0)}const $=_(P,[["render",W]]);export{$ as default};
