import{u,a as x,b as p}from"./Br9E0i3q.js";import{p as g,_ as c,u as h,e as _,f as l,c as n,a as s,F as f,r as v,h as r,o as i,d as b}from"./Bg4yKTBV.js";const M=g("/img/el-luchador/portada.jpg"),T={middleware:"auth",data(){return{user:u(),settings:x(),serverMessage:p(),api:null,seasonDetails:null}},mounted(){h({title:"Temporada - Mad Fénix Games",meta:[{hid:"description",name:"description",content:"Temporada en Mad Fénix Games."}]}),this.setUserCookies(),this.setBackground();const{$api:a}=_();this.api=a,this.getSeasonDetails()},computed:{},methods:{setBackground(){document.getElementById("container-global").style.background="transparent url('/img/perfil/back_temp.jpg') no-repeat top center"},afterLogout(){l.remove("token"),l.remove("user"),this.user.setToken(""),this.user.setUserToNull(),this.user.removeUser(),setTimeout(()=>this.$router.push({path:"/login"}),2e3)},logout(){this.api("/api/logout",{method:"POST"}).then(()=>this.afterLogout()).catch(()=>this.afterLogout())},afterSeasonDetails(a){this.seasonDetails=a},getSeasonDetails(){this.api("/api/season/seasonDetails",{method:"GET"}).then(a=>this.afterSeasonDetails(a)).catch(()=>this.logout())},canjearPremio(a){this.api("/api/season/redeemSeasonLvl",{method:"POST",body:{level:a}}).then(()=>this.getSeasonDetails()).catch(e=>e.message?e.message==="The given data was invalid."?this.serverMessage.setServerMessage("Datos inválidos."):e.response&&e.response._data&&e.response._data.message?this.serverMessage.setServerMessage(e.response._data.message):e.response&&e.response._data?this.serverMessage.setServerMessage(e.response._data):this.serverMessage.setServerMessage(e.message):e.response&&e.response._data&&e.response._data.message?this.serverMessage.setServerMessage(e.response._data.message):e.response&&e.response._data?this.serverMessage.setServerMessage(e.response._data):this.serverMessage.setServerMessage(e))},setUserCookies(){let a=l.get("token");if(a){this.user.setToken(a);let e=l.get("user");if(e)this.user.updateUser(JSON.parse(e));else{console.log("test");try{this.user.fetchUser()}catch{}}}}}},k={key:0},y={class:"relative rounded-tl-3xl rounded-br-3xl min-h-[300px] mx-3 sm:m-auto sm:w-2/3 border border-madfenix-blanco bg-madfenix-gris overflow-hidden"},L={class:"relative min-h-[300px] mb-0 p-6 z-50"},j={class:"absolute w-full bottom-0 px-12 py-3"},H={class:"flex items-end justify-end"},S=["innerHTML"],D={class:"relative mx-3 sm:m-auto sm:w-2/3"},N={class:"flex items-end justify-end title-season"},w=["innerHTML"],P=["innerHTML"],U=["innerHTML"],C={class:"grid grid-cols-1 sm:grid-cols-2 gap-12 mx-3 sm:mx-auto sm:w-2/3 mt-12"},B={class:"relative rounded-tr-3xl rounded-bl-3xl border-2 border-madfenix-naranja bg-madfenix-gris overflow-hidden"},q={class:"p-6 pt-[50px] pb-[70px] relative z-50"},F={class:"font-extrabold tracking-tight text-madfenix-naranja w-full text-center lvl-season-reward"},z=["innerHTML"],E={class:"text-4xl min-h-[200px] tracking-tight text-madfenix-blanco sm:text-5xl w-full text-center"},G=["innerHTML"],O=["innerHTML"],V=["innerHTML"],A=["innerHTML"],I=["innerHTML"],J=["innerHTML"],K={class:"relative sm:mx-auto sm:w-1/2 z-50 contenedor-botones-formularios"},Q={class:"flex justify-center"},W={class:"contenedor-boton-right-formularios"},X={key:0,class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 border-madfenix-naranja border-2"},Y={key:1,class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 border-madfenix-naranja border-2"},Z=["onClick"],$={key:3,class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 border-madfenix-naranja border-2"};function R(a,e,d,ee,o,m){return o.seasonDetails&&o.user?(i(),n("div",k,[e[7]||(e[7]=s("h1",{class:"text-madfenix-naranja w-full text-center py-12"},"Temporada",-1)),s("div",y,[e[0]||(e[0]=s("img",{src:M,class:"absolute",style:{"min-width":"1100px",top:"50%",left:"50%",transform:"translate(-50%, -40%)"}},null,-1)),s("div",L,[s("div",j,[s("div",H,[s("h2",{class:"mt-4 text-4xl font-extrabold text-madfenix-blanco md:mt-5 sm:text-5xl md:text-6xl title-season",innerHTML:o.seasonDetails.name},null,8,S)])])])]),s("div",D,[s("div",N,[s("p",{class:"text-2xl font-medium tracking-tight text-white sm:text-3xl lg:text-4xl lg:leading-tight mt-4",innerHTML:"Nivel: "+(o.seasonDetails.user_season_level??0)+"   "},null,8,w),s("p",{class:"text-2xl font-medium tracking-tight text-white sm:text-3xl lg:text-4xl lg:leading-tight mt-4",innerHTML:"Puntos: "+(o.seasonDetails.user_season_points??0)+"   "},null,8,P),s("p",{class:"text-2xl font-medium tracking-tight text-white sm:text-3xl lg:text-4xl lg:leading-tight mt-4",innerHTML:"Premium: "+(o.seasonDetails.user_season_premium?"Si":"No")},null,8,U)])]),s("div",C,[o.seasonDetails.seasonRewards?(i(!0),n(f,{key:0},v(o.seasonDetails.seasonRewards,t=>(i(),n("div",{key:t.id},[s("div",B,[s("div",q,[s("div",F,[e[1]||(e[1]=b(" Nivel: ")),s("span",{innerHTML:t.level},null,8,z)]),s("div",E,[s("span",{class:"text-2xl sm:text-3xl",innerHTML:t.required_points+" puntos"},null,8,G),e[2]||(e[2]=s("br",null,null,-1)),e[3]||(e[3]=s("span",{class:"font-extrabold"},"Premio:",-1)),e[4]||(e[4]=s("br",null,null,-1)),t.oro?(i(),n("span",{key:0,innerHTML:t.oro+" oros"},null,8,O)):r("",!0),t.plumas?(i(),n("span",{key:1,innerHTML:t.plumas+" plumas"},null,8,V)):r("",!0),t.nft?(i(),n("span",{key:2,innerHTML:"1 Ítem "+t.nft.name+". Límite: "},null,8,A)):r("",!0),t.max_nft_rewards?(i(),n("span",{key:3,innerHTML:t.max_nft_rewards},null,8,I)):r("",!0),t.custom_reward?(i(),n("span",{key:4,innerHTML:t.custom_reward},null,8,J)):r("",!0)])])]),s("div",K,[s("div",Q,[e[5]||(e[5]=s("div",{class:"grow"},"   ",-1)),s("div",W,[t.redeemed?(i(),n("a",X," Canjeado ")):t.required_points<o.seasonDetails.user_season_points&&!(o.seasonDetails.user_season_premium>0)&&!(t.level==1||t.level==5||t.level==10||t.level==15||t.level==20)?(i(),n("a",Y," Necesitas el pase premium ")):t.required_points<o.seasonDetails.user_season_points?(i(),n("a",{key:2,onClick:se=>m.canjearPremio(t.level),class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer"}," Canjea el premio ",8,Z)):(i(),n("a",$," Por desbloquear "))]),e[6]||(e[6]=s("div",{class:"grow"},"   ",-1))])])]))),128)):r("",!0)])])):r("",!0)}const ie=c(T,[["render",R]]);export{ie as default};
