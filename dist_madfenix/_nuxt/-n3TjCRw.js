import{u as n,a as c,b as u}from"./CBBROYQQ.js";import{_ as h,E as l,i as g,u as m,o as r,c as i}from"./B_G2gjAI.js";const p={data(){return{user:n(),settings:c(),serverMessage:u(),api:null,route:l(),accountParameterToUrl:"",pageParameter:"",page:null}},computed:{getHostname:()=>window.location.hostname},mounted(){this.setUserCookies(),window.location.hostname=="our.welore.io"||window.location.hostname=="localhost"?this.accountParameterToUrl=this.route.params.account?this.route.params.account+"/":"":this.accountParameterToUrl="",this.pageParameter=this.route.params.page?this.route.params.page:"home",this.setConfigCookies();const{$api:e}=g();this.api=e,this.fetchPage()},methods:{afterFetchPage(e){var t,o,a,s;this.page=e.content.replace(/<\/?body[^>]*>/gi,""),m({title:e.seo_title+" - "+((o=(t=this.user.config)==null?void 0:t.config)==null?void 0:o.name_ecosystem),meta:[{hid:"description",name:"description",content:e.seo_description+((s=(a=this.user.config)==null?void 0:a.config)==null?void 0:s.name_ecosystem)}]})},fetchPage(){this.pageParameter!=""&&this.api("/api/host/page/"+this.pageParameter+"/get",{method:"GET"}).then(e=>this.afterFetchPage(e.data))},setConfigCookies(){let e=localStorage.getItem(this.accountParameterToUrl.replace(/^\/+|\/+$/g,"")+"_config");if(e&&(e=JSON.parse(e)),e)this.user.setConfig(this.accountParameterToUrl,e);else try{this.user.fetchConfig(this.accountParameterToUrl)}catch{}},setUserCookies(){let e=localStorage.getItem("token");if(e){this.user.setToken(e);let t=localStorage.getItem("user");if(t)this.user.updateUser(JSON.parse(t));else{console.log("test");try{this.user.fetchUser()}catch{}}}}}},f=["innerHTML"],d={key:1};function _(e,t,o,a,s,P){return r(),i("div",null,[s.page?(r(),i("div",{key:0,innerHTML:s.page},null,8,f)):(r(),i("div",d," Cargando... "))])}const S=h(p,[["render",_]]);export{S as _};
