import{u as f,a as b,b as x}from"./Nf_ULQDI.js";import{_ as y,E as k,u as w,h as M,F as m,I as T,p as P,o as i,c as l,a as r,G as a,M as g,N as v,L as c,e as d,d as _}from"./D6bX2HYE.js";const S={middleware:"auth",data(){return{user:f(),settings:b(),serverMessage:x(),api:null,storeDetails:null,showProductsModal:!1,imageItemsReveal:!1,videoNewItems:"/video/MadFenixLogoReveal.mp4",itemsPurchaseToShow:null,route:k(),accountParameterToUrl:""}},mounted(){this.setUserCookies(),this.setBackground(),this.accountParameterToUrl=this.route.params.account?this.route.params.account+"/":"",this.setConfigCookies(),w({title:"Tienda - Mad Fénix",meta:[{hid:"description",name:"description",content:"Tienda en Mad Fénix."}],script:[{async:!0,src:"https://js.stripe.com/v3/buy-button.js"}]});const{$api:t}=M();this.api=t,this.getStoreDetails()},computed:{},methods:{revealImageItems(){this.imageItemsReveal=!0},setBackground(){document.getElementById("container-global").style.background="transparent url('/img/perfil/back_temp.jpg') no-repeat top center"},afterLogout(){m.remove("token"),m.remove("user"),this.user.setToken(""),this.user.setUserToNull(),this.user.removeUser(),setTimeout(()=>this.$router.push({path:"/"+this.accountParameterToUrl+"login"}),2e3)},logout(){this.api("/api/host/logout",{method:"POST"}).then(()=>this.afterLogout()).catch(()=>this.afterLogout())},afterStoreDetails(t){this.storeDetails=t},getStoreDetails(){this.api("/api/host/store/details",{method:"GET"}).then(t=>this.afterStoreDetails(t)).catch(()=>this.logout())},openNewItems(t){t.nfts.length>0?(this.videoNewItems=t.video_purchase,this.itemsPurchaseToShow=t,t.video_purchase?this.imageItemsReveal=!1:this.imageItemsReveal=!0,this.showProductsModal=!0,t.video_purchase&&T(()=>{document.getElementById("video-storemadfenix").play()})):this.$router.push({path:"/"+this.accountParameterToUrl+"perfil"}),this.getStoreDetails()},validateProduct(t){this.api("/api/host/store/validateProductOrder",{method:"POST",body:{product_order_id:t.id}}).then(e=>this.openNewItems(e)).catch(e=>e.message?e.message==="The given data was invalid."?this.serverMessage.setServerMessage("Datos inválidos."):e.response&&e.response._data&&e.response._data.message?this.serverMessage.setServerMessage(e.response._data.message):e.response&&e.response._data?this.serverMessage.setServerMessage(e.response._data):this.serverMessage.setServerMessage(e.message):e.response&&e.response._data&&e.response._data.message?this.serverMessage.setServerMessage(e.response._data.message):e.response&&e.response._data?this.serverMessage.setServerMessage(e.response._data):this.serverMessage.setServerMessage(e))},buyProduct(t,e,h){this.api("/api/host/store/addProductToOrder",{method:"POST",body:{product_id:t}}).then(o=>{(e>0||h>0)&&this.validateProduct(o)}).catch(o=>o.message?o.message==="The given data was invalid."?this.serverMessage.setServerMessage("Datos inválidos."):o.response&&o.response._data&&o.response._data.message?this.serverMessage.setServerMessage(o.response._data.message):o.response&&o.response._data?this.serverMessage.setServerMessage(o.response._data):this.serverMessage.setServerMessage(o.message):o.response&&o.response._data&&o.response._data.message?this.serverMessage.setServerMessage(o.response._data.message):o.response&&o.response._data?this.serverMessage.setServerMessage(o.response._data):this.serverMessage.setServerMessage(o))},getPrice(t){return t.price_oro>0?'<span :class="`text-size-token-store`">'+t.price_oro+"</span> oros":'<span :class="`text-size-token-store`">'+t.price_plumas+"</span> plumas"},setConfigCookies(){let t=m.get(this.accountParameterToUrl.replace(/^\/+|\/+$/g,"")+"_config");if(t&&(t=JSON.parse(t)),t)this.user.setConfig(this.accountParameterToUrl,t);else try{this.user.fetchConfig(this.accountParameterToUrl)}catch{}},setUserCookies(){let t=m.get("token");if(t){this.user.setToken(t);let e=m.get("user");if(e)this.user.updateUser(JSON.parse(e));else{console.log("test");try{this.user.fetchUser()}catch{}}}}}},I={key:0},U={class:a("relative z-30 grid grid-cols-1 sm:grid-cols-12 items-center justify-center mx-auto text-center px-4 sm:px-16 lg:flex-row lg:text-left")},L={class:a("sm:col-span-3 flex items-center py-6 sm:py-0 px-12 h-full text-2xl rounded-tl-3xl rounded-tr-3xl sm:rounded-tr-none bg-[color:var(--gris)] border border-[color:var(--naranja)] sm:border-r-0 font-bold sm:text-4xl")},H=["src","title","alt"],R={class:a("sm:col-span-9 px-3 sm:px-0 py-3 sm:py-0 sm:flex sm:items-center space-x-3 justify-center h-full rounded-br-3xl rounded-bl-3xl sm:rounded-bl-none bg-[color:var(--gris)] border border-[color:var(--naranja)] sm:border-l-0 sm:mr-12 lg:justify-end")},N={class:a("grow font-extrabold tracking-tight")},C={class:a("font-extrabold tracking-tight text-[color:var(--naranja)] text-4xl sm:text-5xl")},E=["innerHTML"],z=["innerHTML"],V={class:a("botones-tokens")},D={key:6,class:a("flex cursor-pointer items-center justify-center w-auto px-8 py-4 text-base font-semibold leading-snug transition ease-in-out bg-white rounded-full h-14 duration-250 text-dark-900")},O=["onClick"],j=["innerHTML"],F={key:1,tabindex:"-1","aria-hidden":"true",class:a("overflow-y-auto overflow-x-hidden bg-[color:var(--gris)] bg-opacity-50 fixed top-0 right-0 left-0 z-50 w-full h-modal md:h-full")},G={class:a("flex items-center justify-center p-4 w-full h-screen")},B={class:a("bg-[color:var(--gris)] text-[color:var(--blanco)] rounded-lg shadow border border-[color:var(--blanco)]")},A={class:a("flex justify-between items-start p-4 rounded-t border-b border-[color:var(--blanco)]")},X={"aria-hidden":"true",class:a("w-5 h-5"),fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},Q={class:a("w-full p-3 overflow-y-auto"),style:{height:"500px","max-width":"700px"}},J=["src"],K={key:1,class:a("grid grid-cols-2 md:grid-cols-3 gap-2")},W={class:a("relative rounded-tr-3xl rounded-bl-3xl border-2 border-[color:var(--naranja)] bg-[color:var(--gris)] overflow-hidden")},Z=["src","alt","title"],Y=["innerHTML"];function q(t,e,h,o,n,p){const u=P("stripe-buy-button");return n.storeDetails?(i(),l("div",I,[e[7]||(e[7]=r("section",{class:a("px-4 py-12 md:py-16 sm:px-6 lg:px-8")},[r("div",{class:a("max-w-screen-xl mx-auto")},[r("div",{class:a("w-full max-w-3xl mx-auto text-center lg:max-w-5xl")},[r("h1",{class:a("mt-4 text-4xl font-extrabold text-[color:var(--naranja)] md:mt-5 sm:text-5xl md:text-6xl"),innerHTML:"Pasa al siguiente nivel"})])])],-1)),n.storeDetails.products?(i(!0),l(g,{key:0},v(n.storeDetails.products,s=>(i(),l("section",{class:a("max-w-screen-xl px-4 py-12 mx-auto md:py-16 sm:px-6 lg:px-8"),key:s.id},[r("div",U,[r("div",L,[r("img",{src:s.image,title:s.name,alt:s.name,class:a("inset-y-0 z-40 h-full")},null,8,H)]),r("div",R,[r("div",N,[r("h5",C,[r("span",{innerHTML:s.name},null,8,E)]),s.short_description?(i(),l("p",{key:0,class:a("text-[color:var(--blanco)] text-xl"),innerHTML:s.short_description},null,8,z)):c("",!0)]),r("div",V,[s.price_fiat>0&&s.price_fiat==5?(i(),d(u,{key:0,"buy-button-id":"buy_btn_1PAYYpHruUfPE2wuw5Mhazx8","publishable-key":"pk_live_51PAXsOHruUfPE2wuT1MTCc3LMcanaF77ZykWh93fUu8whnI6GLIFVfPcBSJVNTzGSiQtchKVsRu2kiziQlOD44XH006ERR5INg","customer-email":n.user.email},null,8,["customer-email"])):s.price_fiat>0&&s.price_fiat==10?(i(),d(u,{key:1,"buy-button-id":"buy_btn_1PAaDhHruUfPE2wuOkz0bx5C","publishable-key":"pk_live_51PAXsOHruUfPE2wuT1MTCc3LMcanaF77ZykWh93fUu8whnI6GLIFVfPcBSJVNTzGSiQtchKVsRu2kiziQlOD44XH006ERR5INg","customer-email":n.user.email},null,8,["customer-email"])):s.price_fiat>0&&s.price_fiat==20?(i(),d(u,{key:2,"buy-button-id":"buy_btn_1PAaEuHruUfPE2wu6DXK5KYT","publishable-key":"pk_live_51PAXsOHruUfPE2wuT1MTCc3LMcanaF77ZykWh93fUu8whnI6GLIFVfPcBSJVNTzGSiQtchKVsRu2kiziQlOD44XH006ERR5INg","customer-email":n.user.email},null,8,["customer-email"])):s.price_fiat>0&&s.price_fiat==40?(i(),d(u,{key:3,"buy-button-id":"buy_btn_1PAaI3HruUfPE2wu9m6H5vGp","publishable-key":"pk_live_51PAXsOHruUfPE2wuT1MTCc3LMcanaF77ZykWh93fUu8whnI6GLIFVfPcBSJVNTzGSiQtchKVsRu2kiziQlOD44XH006ERR5INg","customer-email":n.user.email},null,8,["customer-email"])):s.price_fiat>0&&s.price_fiat==80?(i(),d(u,{key:4,"buy-button-id":"buy_btn_1PAaHCHruUfPE2wua82AVGzY","publishable-key":"pk_live_51PAXsOHruUfPE2wuT1MTCc3LMcanaF77ZykWh93fUu8whnI6GLIFVfPcBSJVNTzGSiQtchKVsRu2kiziQlOD44XH006ERR5INg","customer-email":n.user.email},null,8,["customer-email"])):s.price_fiat>0&&s.price_fiat==160?(i(),d(u,{key:5,"buy-button-id":"buy_btn_1PAaJKHruUfPE2wuU9Jq0Nu9","publishable-key":"pk_live_51PAXsOHruUfPE2wuT1MTCc3LMcanaF77ZykWh93fUu8whnI6GLIFVfPcBSJVNTzGSiQtchKVsRu2kiziQlOD44XH006ERR5INg","customer-email":n.user.email},null,8,["customer-email"])):s.price_fiat>0?(i(),l("a",D," Próximamente ")):(i(),l("a",{key:7,onClick:$=>p.buyProduct(s.id,s.price_oro,s.price_plumas),class:a("w-full m-auto justify-center px-8 py-4 btn-madfenix text-[color:var(--gris)] font-semibold bg-[color:var(--naranja)] leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-[color:var(--naranja)] hover:bg-[color:var(--gris)] border-[color:var(--naranja)] border-2 cursor-pointer")},[e[2]||(e[2]=_(" Comprar por ")),r("span",{innerHTML:p.getPrice(s)},null,8,j)],8,O))])])])]))),128)):c("",!0),n.showProductsModal?(i(),l("div",F,[r("div",G,[r("div",B,[r("div",A,[e[5]||(e[5]=r("h3",{class:a("text-xl font-semibold")}," ¡Tus nuevos ítems! ",-1)),r("button",{type:"button",onClick:e[0]||(e[0]=s=>{n.showProductsModal=!1,n.imageItemsReveal=!1}),class:a("text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white")},[(i(),l("svg",X,e[3]||(e[3]=[r("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]))),e[4]||(e[4]=r("span",{class:a("sr-only")},"Cerrar pantalla",-1))])]),r("div",Q,[n.imageItemsReveal?c("",!0):(i(),l("video",{key:0,id:"video-storemadfenix",class:a("rounded rounded-3xl border border-2 border-[color:var(--gris)]"),playsinline:"",onEnded:e[1]||(e[1]=s=>p.revealImageItems())},[r("source",{src:n.videoNewItems,type:"video/mp4"},null,8,J),e[6]||(e[6]=_(" Tu navegador no soporta el video. "))],32)),n.imageItemsReveal&&n.itemsPurchaseToShow?(i(),l("div",K,[(i(!0),l(g,null,v(n.itemsPurchaseToShow.nfts,s=>(i(),l("div",{key:s.id},[r("div",W,[r("img",{src:s.image,style:{width:"100%"},alt:s.name,title:s.name},null,8,Z),r("div",{class:a("px-6 mt-3 mb-10 relative z-50 w-full text-center text-[color:var(--blanco)]"),innerHTML:s.name},null,8,Y)])]))),128))])):c("",!0)])])])])):c("",!0)])):c("",!0)}const te=y(S,[["render",q]]);export{te as _};
