import{_ as g}from"./aA2wvse4.js";import{u as b,a as v,b as y}from"./C2oDq7eq.js";import{p as x,_ as w,u as j,e as c,c as i,a as t,d as o,b as a,w as m,g as p,F as k,r as T,o as r}from"./7mr4NtWn.js";import{u as M}from"./BxyVhGVW.js";const L=x("/img/perfil/tiefling_bard.png"),h=x("/img/perfil/twitch_account.svg"),H=x("/img/perfil/logout.svg"),S=x("/img/perfil/oro.png"),z=x("/img/perfil/pluma.png"),P={middleware:"auth",data(){return{user:b(),settings:v(),serverMessage:y(),api:null,perfil:null}},mounted(){M({title:"Perfil - Mad Fénix Games",meta:[{hid:"description",name:"description",content:"Perfil en Mad Fénix Games."}]}),this.setUserCookies(),this.setBackground();const{$api:n}=j();this.api=n,this.getPerfil()},computed:{nftCollections(){let n=[];if(this.perfil&&this.perfil.nfts)for(let e=0;e<this.perfil.nfts.length;e++)n.some(l=>l.nft_id===this.perfil.nfts[e].nft_id)||n.push({nft_id:this.perfil.nfts[e].nft_id,name:this.perfil.nfts[e].nft.name,short_description:this.perfil.nfts[e].nft.short_description,portrait_image:this.perfil.nfts[e].nft.portrait_image,featured_image:this.perfil.nfts[e].nft.featured_image});if(this.perfil&&this.perfil.nfts_hedera)for(let e=0;e<this.perfil.nfts_hedera.length;e++)n.some(l=>l.nft_id===this.perfil.nfts_hedera[e].nft_id)||n.push({nft_id:this.perfil.nfts_hedera[e].nft_id,name:this.perfil.nfts_hedera[e].nft.name,short_description:this.perfil.nfts_hedera[e].nft.short_description,portrait_image:this.perfil.nfts_hedera[e].nft.portrait_image,featured_image:this.perfil.nfts_hedera[e].nft.featured_image});return n}},methods:{setBackground(){document.getElementById("container-global").style.background="transparent url('/img/perfil/back_temp.jpg') no-repeat top center"},afterLogout(){c.remove("token"),c.remove("user"),this.user.setToken(""),this.user.setUserToNull(),this.user.removeUser(),setTimeout(()=>this.$router.push({path:"/login"}),2e3)},logout(){this.api("/api/logout",{method:"POST"}).then(()=>this.afterLogout()).catch(()=>this.afterLogout())},afterPerfil(n){this.perfil=n},getPerfil(){this.api("/api/profile/getUserProfile",{method:"POST"}).then(n=>this.afterPerfil(n)).catch(()=>this.logout())},desconectarTwitch(){confirm("¿Estás seguro que quieres desconectar tu cuenta de Twitch?")&&this.api("/api/twitch/disconnectTwitch",{method:"POST"}).then(e=>this.getPerfil()).catch(e=>e.message?e.message==="The given data was invalid."?this.serverMessage.setServerMessage("Datos inválidos."):this.serverMessage.setServerMessage(e.message):this.serverMessage.setServerMessage("Error."))},desconectarSteam(){this.api("/api/steam/disconnectSteam",{method:"POST"}).then(n=>this.getPerfil()).catch(n=>n.message?n.message==="The given data was invalid."?this.serverMessage.setServerMessage("Datos inválidos."):this.serverMessage.setServerMessage(n.message):this.serverMessage.setServerMessage("Error."))},conectarSteam(){},countNFTsByid(n){let e=0;if(this.perfil&&this.perfil.nfts)for(let l=0;l<this.perfil.nfts.length;l++)this.perfil.nfts[l].nft_id==n&&(e+=1);if(this.perfil&&this.perfil.nfts_hedera)for(let l=0;l<this.perfil.nfts_hedera.length;l++)this.perfil.nfts_hedera[l].nft_id==n&&(e+=1);return e},setUserCookies(){let n=c.get("token");if(n){this.user.setToken(n);let e=c.get("user");if(e)this.user.updateUser(JSON.parse(e));else{console.log("test");try{this.user.fetchUser()}catch{}}}}}},C={key:0},F={class:"md:grid md:grid-cols-3 md:items-center border-y-2 border-madfenix-naranja bg-madfenix-gris"},A={class:"text-right col-span-1 px-6"},B=["innerHTML"],N=["innerHTML"],D={class:"flex space-x-3 justify-end my-3"},U={key:0,class:"flex items-center space-x-3 text-white text-center"},E=["innerHTML"],O={key:1},V=["href"],R={class:"col-span-1 px-6"},q={key:0,class:"my-4 w-full text-white text-center text-sm lg:text-xl"},G=["innerHTML"],I={key:1,class:"my-4"},J={key:2,class:"my-4"},K={key:3,class:"my-4 w-full text-white text-center text-sm lg:text-xl"},Q=["innerHTML"],W={key:4,class:"my-4"},X={key:5,class:"my-4 w-full text-white text-center text-sm lg:text-xl"},Y=["innerHTML"],Z={key:6,class:"my-4"},$={key:7,class:"my-4 w-full text-white text-center hidden text-sm lg:text-xl"},ee=["innerHTML"],te={key:8,class:"my-4 hidden text-sm lg:text-xl"},se={class:"my-4"},ne={class:"max-w-screen-xl px-4 py-12 mx-auto md:py-16 sm:px-6 lg:px-8"},ie={class:"relative z-30 grid grid-cols-1 sm:grid-cols-12 items-center justify-center mx-auto text-center px-4 sm:px-16 lg:flex-row lg:text-left"},re={class:"sm:col-span-3 flex items-center py-6 sm:py-0 px-12 h-full text-2xl font-bold sm:text-4xl rounded-tr-3xl sm:rounded-tr-none rounded-tl-3xl sm:rounded-bl-3xl bg-madfenix-gris"},oe={class:"font-extrabold tracking-tight text-white text-size-token-number text-center w-full"},le=["innerHTML"],ae={key:1},de=["innerHTML"],fe={class:"sm:col-span-7 px-3 sm:px-0 py-3 sm:py-0 flex space-x-3 items-center justify-center h-full bg-madfenix-azul sm:rounded-tr-3xl rounded-bl-3xl sm:rounded-bl-none rounded-br-3xl sm:mr-12 lg:justify-end"},me={class:"botones-tokens"},ue={class:"max-w-screen-xl px-4 py-12 mx-auto md:py-16 sm:px-6 lg:px-8"},xe={class:"relative z-30 grid grid-cols-1 sm:grid-cols-12 items-center justify-center mx-auto text-center px-4 sm:px-16 lg:flex-row lg:text-left"},ce={class:"sm:col-span-3 flex items-center py-6 sm:py-0 px-12 h-full text-2xl font-bold sm:text-4xl rounded-tr-3xl sm:rounded-tr-none rounded-tl-3xl sm:rounded-bl-3xl bg-madfenix-gris"},pe={class:"font-extrabold tracking-tight text-white text-size-token-number text-center w-full"},ge=["innerHTML"],he={key:1},_e=["innerHTML"],be={class:"sm:col-span-7 px-3 sm:px-0 py-3 sm:py-0 flex items-center space-x-3 justify-center h-full bg-madfenix-azul sm:rounded-tr-3xl rounded-bl-3xl sm:rounded-bl-none rounded-br-3xl sm:mr-12 lg:justify-end"},ve={class:"botones-tokens"},ye={class:"relative rounded-tl-3xl rounded-br-3xl min-h-[300px] mx-3 mt-12 sm:mx-auto sm:w-2/3 bg-madfenix-gris border border-madfenix-naranja overflow-hidden"},we=["src"],je={class:"relative sm:mx-auto sm:w-1/2 z-50 contenedor-botones-formularios"},ke={class:"flex justify-center"},Te={class:"contenedor-boton-right-formularios"};function Me(n,e,l,Le,s,u){const d=g,_=g;return s.user.user&&s.perfil?(r(),i("div",C,[t("div",F,[e[20]||(e[20]=t("div",{class:"col-span-1 h-full"},[t("img",{src:L,alt:"Avatar perfil Mad Fénix",title:"Avatar perfil Mad Fénix",class:"h-full"})],-1)),t("div",A,[t("div",{innerHTML:"@"+s.user.user.name,class:"text-lg lg:text-5xl font-black text-madfenix-naranja my-3"},null,8,B),t("div",{innerHTML:s.user.user.email,class:"text-sm lg:text-xl text-white my-3"},null,8,N),t("div",D,[s.perfil&&s.perfil.user_twitch?(r(),i("div",U,[t("a",{onClick:e[0]||(e[0]=f=>u.desconectarTwitch()),class:"cursor-pointer"},e[4]||(e[4]=[t("img",{src:h,alt:"Desconectar Twitch",title:"Desconectar Twitch",class:"w-[50px] lg:w-[70px]"},null,-1)])),t("span",{innerHTML:s.perfil.user_twitch},null,8,E)])):(r(),i("div",O,[t("a",{href:"https://id.twitch.tv/oauth2/authorize?response_type=code&client_id=2wbjjwkzyy9t68a8ex5b4fsz7kfc37&redirect_uri=https%3A%2F%2Fapi.madfenix.com%2Fapi%2Ftwitch%2FconnectAccount&scope=user%3Aread%3Aemail&state=user"+s.user.user.id,class:"cursor-pointer"},e[5]||(e[5]=[t("img",{src:h,alt:"Conectar Twitch",title:"Conectar Twitch",class:"w-[50px] lg:w-[70px]"},null,-1)]),8,V)])),t("div",null,[t("a",{onClick:e[1]||(e[1]=f=>u.logout()),class:"cursor-pointer"},e[6]||(e[6]=[t("img",{src:H,alt:"Logout",title:"Logout",class:"w-[50px] lg:w-[70px]"},null,-1)]))])])]),t("div",R,[s.perfil&&s.perfil.hedera_wallet?(r(),i("div",q,[e[7]||(e[7]=o(" Tu cartera de hedera vinculada: ")),t("span",{innerHTML:s.perfil.hedera_wallet},null,8,G),e[8]||(e[8]=o(".  "))])):s.perfil&&s.perfil.hedera_wallet_check?(r(),i("div",I,[a(d,{to:"/vincular-wallet-hedera-2",class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer"},{default:m(()=>e[9]||(e[9]=[o(" Vincular hedera ")])),_:1})])):(r(),i("div",J,[a(d,{to:"/vincular-wallet-hedera",class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer"},{default:m(()=>e[10]||(e[10]=[o(" Vincular hedera ")])),_:1})])),s.perfil&&s.perfil.referred_code_from?(r(),i("div",K,[e[11]||(e[11]=o(" Tu referido: ")),t("span",{innerHTML:s.perfil.referred_code_from},null,8,Q),e[12]||(e[12]=o(".  "))])):(r(),i("div",W,[a(d,{to:"/vincular-codigo-referido",class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer"},{default:m(()=>e[13]||(e[13]=[o(" Vincular código de referido ")])),_:1})])),s.perfil&&s.perfil.referred_code?(r(),i("div",X,[e[14]||(e[14]=o(" Tu código de referido: ")),t("span",{innerHTML:s.perfil.referred_code},null,8,Y),e[15]||(e[15]=o(".  "))])):(r(),i("div",Z,[a(d,{to:"/crear-codigo-referido",class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer"},{default:m(()=>e[16]||(e[16]=[o(" Crear código de referido ")])),_:1})])),s.perfil&&s.perfil.user_steam?(r(),i("div",$,[e[17]||(e[17]=o(" Conectad@ con ")),t("span",{innerHTML:s.perfil.user_steam},null,8,ee),e[18]||(e[18]=o(".  ")),t("a",{onClick:e[2]||(e[2]=f=>u.desconectarSteam()),class:"text-white underline font-semibold hover:no-underline"}," Desconectar Steam ")])):(r(),i("div",te,[t("a",{onClick:e[3]||(e[3]=f=>u.conectarSteam()),class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer"}," Conectar Steam ")])),t("div",se,[a(d,{to:"/eliminar-cuenta",class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer"},{default:m(()=>e[19]||(e[19]=[o(" Eliminar cuenta ")])),_:1})])])]),t("section",ne,[t("div",ie,[t("div",re,[t("h5",oe,[s.perfil?(r(),i("span",{key:0,innerHTML:s.perfil.oro},null,8,le)):(r(),i("span",ae,"...")),s.perfil&&s.perfil.oro_hedera?(r(),i("p",{key:2,innerHTML:s.perfil.oro_hedera+" RED",class:"mt-4 text-xl"},null,8,de)):p("",!0)])]),e[25]||(e[25]=t("div",{class:"sm:col-span-2 flex items-center justify-center bg-madfenix-azul"},[t("img",{src:S,alt:"Oro",class:"absolute z-50 h-1/2 sm:h-full"}),t("svg",{class:"inset-y-0 z-40 h-full text-madfenix-gris",preserveAspectRatio:"none",viewBox:"0 0 100 100",fill:"currentcolor"},[t("polygon",{points:"0,0 100,0 0,100"})])],-1)),t("div",fe,[e[24]||(e[24]=t("h5",{class:"grow font-extrabold tracking-tight text-white text-size-token"}," Oros ",-1)),t("div",me,[a(d,{to:"/canjear-cupon-oro",class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer"},{default:m(()=>e[21]||(e[21]=[o(" Canjea un cupón ")])),_:1}),e[23]||(e[23]=t("br",null,null,-1)),a(d,{to:"/transfiere-oro-a-hedera-previo1",class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer"},{default:m(()=>e[22]||(e[22]=[o(" Transfiere Oro ")])),_:1})])])])]),t("section",ue,[t("div",xe,[t("div",ce,[t("h5",pe,[s.perfil?(r(),i("span",{key:0,innerHTML:s.perfil.plumas},null,8,ge)):(r(),i("span",he,"...")),s.perfil&&s.perfil.plumas_hedera?(r(),i("p",{key:2,innerHTML:s.perfil.plumas_hedera+" RED",class:"mt-4 text-xl"},null,8,_e)):p("",!0)])]),e[30]||(e[30]=t("div",{class:"sm:col-span-2 flex items-center justify-center bg-madfenix-azul"},[t("img",{src:z,alt:"Plumas",class:"absolute z-50 h-1/2 sm:h-full"}),t("svg",{class:"inset-y-0 z-40 h-full text-madfenix-gris",preserveAspectRatio:"none",viewBox:"0 0 100 100",fill:"currentcolor"},[t("polygon",{points:"0,0 100,0 0,100"})])],-1)),t("div",be,[e[29]||(e[29]=t("h5",{class:"grow font-extrabold tracking-tight text-white text-size-token"}," Plumas ",-1)),t("div",ve,[a(d,{to:"/canjear-cupon",class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer"},{default:m(()=>e[26]||(e[26]=[o(" Canjea un cupón ")])),_:1}),e[28]||(e[28]=t("br",null,null,-1)),a(d,{to:"/transfiere-plumas-a-hedera-previo1",class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer"},{default:m(()=>e[27]||(e[27]=[o(" Transfiere Plumas ")])),_:1})])])])]),u.nftCollections?(r(!0),i(k,{key:0},T(u.nftCollections,f=>(r(),i("div",{class:"w-full",key:f.nft_id},[t("div",ye,[t("img",{src:f.featured_image,class:"absolute",style:{"min-width":"1100px",top:"50%",left:"50%",transform:"translate(-50%, -40%)"}},null,8,we),e[31]||(e[31]=t("div",{class:"relative min-h-[300px] mb-0 p-6 z-50"},"   ",-1))]),t("div",je,[t("div",ke,[t("div",Te,[a(_,{to:"/coleccion/?nft_id="+f.nft_id,class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer",innerHTML:f.name+" ("+u.countNFTsByid(f.nft_id)+")"},null,8,["to","innerHTML"])])])])]))),128)):p("",!0)])):p("",!0)}const Ce=w(P,[["render",Me]]);export{Ce as default};
