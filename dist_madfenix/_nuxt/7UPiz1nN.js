import{u as d,a as f,b as g}from"./C2BjQ3NH.js";import{O as p,_,E as x,u as v,h as w,F as l,o as n,c as a,a as o,G as i,M as k,N as y,L as h}from"./DJJX_XDf.js";const T=p("/img/streams/notificationSong.ogg"),U=p("/img/streams/fenix_feliz.png"),N={middleware:"auth",data(){return{user:d(),settings:f(),serverMessage:g(),api:null,items:null,itemsInterval:null,itemsIntervalRemove:null,route:x(),accountParameterToUrl:""}},computed:{},mounted(){var r,c,s,u;this.setUserCookies(),window.location.hostname=="our.welore.io"?this.accountParameterToUrl=this.route.params.account?this.route.params.account+"/":"":this.accountParameterToUrl=window.location.hostname.split(".")[0]+"/",this.setConfigCookies(),v({title:"Notificaciones - "+((c=(r=this.user.config)==null?void 0:r.config)==null?void 0:c.name_ecosystem),meta:[{hid:"description",name:"description",content:"Notificaciones en "+((u=(s=this.user.config)==null?void 0:s.config)==null?void 0:u.name_ecosystem)}]});const{$api:e}=w();this.api=e,this.fetch();let t=this;window.addEventListener("keyup",function(m){t.fetch()})},methods:{removeItems(){this.items=null,window.document.getElementById("audioNotification").stop()},fetch(){this.api("/api/host/store/getLastProductOrders",{method:"GET"}).then(e=>{e.length>0&&(this.items=e,window.document.getElementById("audioNotification").play())}).catch(e=>e.message?this.serverMessage.setServerMessage(e.message):this.serverMessage.setServerMessage("Error.")),this.itemsInterval=setTimeout(this.fetch,6e4),this.itemsIntervalRemove=setTimeout(this.removeItems,15e3)},setConfigCookies(){let e=l.get(this.accountParameterToUrl.replace(/^\/+|\/+$/g,"")+"_config");if(e&&(e=JSON.parse(e)),e)this.user.setConfig(this.accountParameterToUrl,e);else try{this.user.fetchConfig(this.accountParameterToUrl)}catch{}},setUserCookies(){let e=l.get("token");if(e){this.user.setToken(e);let t=l.get("user");if(t)this.user.updateUser(JSON.parse(t));else{console.log("test");try{this.user.fetchUser()}catch{}}}}}},C={key:0,class:i("min-h-screen flex items-center justify-center bg-green-600 p-4")},S={key:0},b={class:i("w-[800px]")},M=["innerHTML"];function I(e,t,r,c,s,u){return s.user.user?(n(),a("div",C,[t[1]||(t[1]=o("audio",{id:"audioNotification"},[o("source",{src:T,type:"audio/ogg"})],-1)),s.items?(n(),a("div",S,[t[0]||(t[0]=o("div",{class:i("w-full items-center text-center")},[o("img",{src:U,class:i("mx-auto w-[250px]")})],-1)),(n(!0),a(k,null,y(s.items,m=>(n(),a("div",b,[o("div",{innerHTML:m,class:i("text-5xl font-bold text-white"),style:{"text-shadow":"-4px -4px 0 black, 4px -4px 0 black, -4px  4px 0 black, 4px  4px 0 black"}},null,8,M)]))),256))])):h("",!0)])):h("",!0)}const P=_(N,[["render",I]]);export{P as _};
