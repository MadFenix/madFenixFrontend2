import{u,a as x,b as c}from"./4Qp71cwp.js";import{p as g,_ as p,u as h,e as l,c as n,a as e,F as f,r as _,g as a,o as i,d as v}from"./DIcX30nQ.js";import{u as b}from"./BRvpyIUT.js";const T=g("/img/el-luchador/portada.jpg"),k={middleware:"auth",data(){return{user:u(),settings:x(),serverMessage:c(),api:null,seasonDetails:null}},mounted(){b({title:"Temporada - Mad Fénix Games",meta:[{hid:"description",name:"description",content:"Temporada en Mad Fénix Games."}]}),this.setUserCookies(),this.setBackground();const{$api:o}=h();this.api=o,this.getSeasonDetails()},computed:{},methods:{setBackground(){document.getElementById("container-global").style.background="transparent url('/img/perfil/back_temp.jpg') no-repeat top center"},afterLogout(){l.remove("token"),l.remove("user"),this.user.setToken(""),this.user.setUserToNull(),this.user.removeUser(),setTimeout(()=>this.$router.push({path:"/login"}),2e3)},logout(){this.api("/api/logout",{method:"POST"}).then(()=>this.afterLogout()).catch(()=>this.afterLogout())},afterSeasonDetails(o){this.seasonDetails=o},getSeasonDetails(){this.api("/api/season/seasonDetails",{method:"GET"}).then(o=>this.afterSeasonDetails(o)).catch(()=>this.logout())},canjearPremio(o){this.api("/api/season/redeemSeasonLvl",{method:"POST",body:{level:o}}).then(()=>this.getSeasonDetails()).catch(t=>t.message?t.message==="The given data was invalid."?this.serverMessage.setServerMessage("Datos inválidos."):this.serverMessage.setServerMessage(t.message):this.serverMessage.setServerMessage("Error."))},setUserCookies(){let o=l.get("token");if(o){this.user.setToken(o);let t=l.get("user");if(t)this.user.updateUser(JSON.parse(t));else{console.log("test");try{this.user.fetchUser()}catch{}}}}}},M={key:0},y={class:"relative rounded-tl-3xl rounded-br-3xl min-h-[300px] mx-3 sm:m-auto sm:w-2/3 border border-madfenix-blanco bg-madfenix-gris overflow-hidden"},L={class:"relative min-h-[300px] mb-0 p-6 z-50"},j={class:"absolute w-full bottom-0 px-12 py-3"},H={class:"flex items-end justify-end"},D=["innerHTML"],S={class:"relative mx-3 sm:m-auto sm:w-2/3"},N={class:"flex items-end justify-end title-season"},w=["innerHTML"],P=["innerHTML"],U=["innerHTML"],C={class:"grid grid-cols-1 sm:grid-cols-2 gap-12 mx-3 sm:mx-auto sm:w-2/3 mt-12"},B={class:"relative rounded-tr-3xl rounded-bl-3xl border-2 border-madfenix-naranja bg-madfenix-gris overflow-hidden"},q={class:"p-6 pt-[50px] pb-[70px] relative z-50"},E={class:"font-extrabold tracking-tight text-madfenix-naranja w-full text-center lvl-season-reward"},F=["innerHTML"],z={class:"text-4xl min-h-[200px] tracking-tight text-madfenix-blanco sm:text-5xl w-full text-center"},G=["innerHTML"],O=["innerHTML"],V=["innerHTML"],A=["innerHTML"],I=["innerHTML"],J=["innerHTML"],K={class:"relative sm:mx-auto sm:w-1/2 z-50 contenedor-botones-formularios"},Q={class:"flex justify-center"},W={class:"contenedor-boton-right-formularios"},X={key:0,class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 border-madfenix-naranja border-2"},Y={key:1,class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 border-madfenix-naranja border-2"},Z=["onClick"],$={key:3,class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 border-madfenix-naranja border-2"};function R(o,t,d,ee,r,m){return r.seasonDetails&&r.user?(i(),n("div",M,[t[7]||(t[7]=e("h1",{class:"text-madfenix-naranja w-full text-center py-12"},"Temporada",-1)),e("div",y,[t[0]||(t[0]=e("img",{src:T,class:"absolute",style:{"min-width":"1100px",top:"50%",left:"50%",transform:"translate(-50%, -40%)"}},null,-1)),e("div",L,[e("div",j,[e("div",H,[e("h2",{class:"mt-4 text-4xl font-extrabold text-madfenix-blanco md:mt-5 sm:text-5xl md:text-6xl title-season",innerHTML:r.seasonDetails.name},null,8,D)])])])]),e("div",S,[e("div",N,[e("p",{class:"text-2xl font-medium tracking-tight text-white sm:text-3xl lg:text-4xl lg:leading-tight mt-4",innerHTML:"Nivel: "+(r.seasonDetails.user_season_level??0)+"   "},null,8,w),e("p",{class:"text-2xl font-medium tracking-tight text-white sm:text-3xl lg:text-4xl lg:leading-tight mt-4",innerHTML:"Puntos: "+(r.seasonDetails.user_season_points??0)+"   "},null,8,P),e("p",{class:"text-2xl font-medium tracking-tight text-white sm:text-3xl lg:text-4xl lg:leading-tight mt-4",innerHTML:"Premium: "+(r.seasonDetails.user_season_premium?"Si":"No")},null,8,U)])]),e("div",C,[r.seasonDetails.seasonRewards?(i(!0),n(f,{key:0},_(r.seasonDetails.seasonRewards,s=>(i(),n("div",{key:s.id},[e("div",B,[e("div",q,[e("div",E,[t[1]||(t[1]=v(" Nivel: ")),e("span",{innerHTML:s.level},null,8,F)]),e("div",z,[e("span",{class:"text-2xl sm:text-3xl",innerHTML:s.required_points+" puntos"},null,8,G),t[2]||(t[2]=e("br",null,null,-1)),t[3]||(t[3]=e("span",{class:"font-extrabold"},"Premio:",-1)),t[4]||(t[4]=e("br",null,null,-1)),s.oro?(i(),n("span",{key:0,innerHTML:s.oro+" oros"},null,8,O)):a("",!0),s.plumas?(i(),n("span",{key:1,innerHTML:s.plumas+" plumas"},null,8,V)):a("",!0),s.nft?(i(),n("span",{key:2,innerHTML:"1 Ítem "+s.nft.name+". Límite: "},null,8,A)):a("",!0),s.max_nft_rewards?(i(),n("span",{key:3,innerHTML:s.max_nft_rewards},null,8,I)):a("",!0),s.custom_reward?(i(),n("span",{key:4,innerHTML:s.custom_reward},null,8,J)):a("",!0)])])]),e("div",K,[e("div",Q,[t[5]||(t[5]=e("div",{class:"grow"},"   ",-1)),e("div",W,[s.redeemed?(i(),n("a",X," Canjeado ")):s.required_points<r.seasonDetails.user_season_points&&!(r.seasonDetails.user_season_premium>0)&&!(s.level==1||s.level==5||s.level==10||s.level==15||s.level==20)?(i(),n("a",Y," Necesitas el pase premium ")):s.required_points<r.seasonDetails.user_season_points?(i(),n("a",{key:2,onClick:te=>m.canjearPremio(s.level),class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer"}," Canjea el premio ",8,Z)):(i(),n("a",$," Por desbloquear "))]),t[6]||(t[6]=e("div",{class:"grow"},"   ",-1))])])]))),128)):a("",!0)])])):a("",!0)}const oe=p(k,[["render",R]]);export{oe as default};
