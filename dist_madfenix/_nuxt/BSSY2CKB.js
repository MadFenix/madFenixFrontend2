import{u as d,a as p,b as g}from"./COtTB0B9.js";import{O as h,_ as f,E as _,u as x,h as v,o as a,c as n,a as o,F as i,M as w,N as k,L as m}from"./BqLSPAkt.js";const y=h("/img/streams/notificationSong.ogg"),S=h("/img/streams/fenix_feliz.png"),T={middleware:"auth",data(){return{user:d(),settings:p(),serverMessage:g(),api:null,items:null,itemsInterval:null,itemsIntervalRemove:null,route:_(),accountParameterToUrl:""}},computed:{},mounted(){var r,c,s,l;this.setUserCookies(),window.location.hostname=="our.welore.io"?this.accountParameterToUrl=this.route.params.account?this.route.params.account+"/":"":this.accountParameterToUrl=window.location.hostname.split(".")[0]+"/",this.setConfigCookies(),x({title:"Notificaciones - "+((c=(r=this.user.config)==null?void 0:r.config)==null?void 0:c.name_ecosystem),meta:[{hid:"description",name:"description",content:"Notificaciones en "+((l=(s=this.user.config)==null?void 0:s.config)==null?void 0:l.name_ecosystem)}]});const{$api:e}=v();this.api=e,this.fetch();let t=this;window.addEventListener("keyup",function(u){t.fetch()})},methods:{removeItems(){this.items=null,window.document.getElementById("audioNotification").stop()},fetch(){this.api("/api/host/store/getLastProductOrders",{method:"GET"}).then(e=>{e.length>0&&(this.items=e,window.document.getElementById("audioNotification").play())}).catch(e=>e.message?this.serverMessage.setServerMessage(e.message):this.serverMessage.setServerMessage("Error.")),this.itemsInterval=setTimeout(this.fetch,6e4),this.itemsIntervalRemove=setTimeout(this.removeItems,15e3)},setConfigCookies(){let e=localStorage.getItem(this.accountParameterToUrl.replace(/^\/+|\/+$/g,"")+"_config");if(e&&(e=JSON.parse(e)),e)this.user.setConfig(this.accountParameterToUrl,e);else try{this.user.fetchConfig(this.accountParameterToUrl)}catch{}},setUserCookies(){let e=localStorage.getItem("token");if(e){this.user.setToken(e);let t=localStorage.getItem("user");if(t)this.user.updateUser(JSON.parse(t));else{console.log("test");try{this.user.fetchUser()}catch{}}}}}},U={key:0,class:i("min-h-screen flex items-center justify-center bg-green-600 p-4")},I={key:0},N={class:i("w-[800px]")},C=["innerHTML"];function b(e,t,r,c,s,l){return s.user.user?(a(),n("div",U,[t[1]||(t[1]=o("audio",{id:"audioNotification"},[o("source",{src:y,type:"audio/ogg"})],-1)),s.items?(a(),n("div",I,[t[0]||(t[0]=o("div",{class:i("w-full items-center text-center")},[o("img",{src:S,class:i("mx-auto w-[250px]")})],-1)),(a(!0),n(w,null,k(s.items,u=>(a(),n("div",N,[o("div",{innerHTML:u,class:i("text-5xl font-bold text-white"),style:{"text-shadow":"-4px -4px 0 black, 4px -4px 0 black, -4px  4px 0 black, 4px  4px 0 black"}},null,8,C)]))),256))])):m("",!0)])):m("",!0)}const L=f(T,[["render",b]]);export{L as _};
