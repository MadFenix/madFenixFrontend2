import{_ as y}from"./DxuRNPGq.js";import{u as _,a as w,b as M}from"./Y8Ts07hf.js";import{_ as k,E as j,u as U,h as S,H as x,o as i,c as m,a as t,F as s,M as H,N as P,J as c,K as u,L as b,b as f,w as v,d as h}from"./Cld2Kx8I.js";import{_ as T}from"./Bmk5Aq2_.js";const C={middleware:"auth",data(){return{user:_(),settings:w(),serverMessage:M(),api:null,transactionData:{id:"",name:"",order:0},newHabit:{id:"",name:"",order:0},perfil:null,route:j(),accountParameterToUrl:""}},computed:{},mounted(){var e,n,r,a;this.setUserCookies(),this.setBackground(),window.location.hostname=="our.welore.io"||window.location.hostname=="localhost"?this.accountParameterToUrl=this.route.params.account?this.route.params.account+"/":"":this.accountParameterToUrl="",this.setConfigCookies(),U({title:"Hábitos - "+((n=(e=this.user.config)==null?void 0:e.config)==null?void 0:n.name_ecosystem),meta:[{hid:"description",name:"description",content:"Hábitos en "+((a=(r=this.user.config)==null?void 0:r.config)==null?void 0:a.name_ecosystem)}]});const{$api:o}=S();this.api=o,this.getPerfil()},methods:{setBackground(){window.location.hostname=="madfenix.com"&&(document.getElementById("container-global").style.background="transparent url('/img/perfil/back_temp.jpg') no-repeat top center")},afterPostHabit(o){this.getPerfil()},postHabit(o,e,n){this.transactionData.id=o,this.transactionData.name=e,this.transactionData.order=n,this.api("/api/host/habit/post",{method:"POST",body:this.transactionData}).then(r=>this.afterPostHabit(r)).catch(r=>r.message?r.message==="The given data was invalid."?this.serverMessage.setServerMessage("Datos inválidos."):r.response&&r.response._data&&r.response._data.message?this.serverMessage.setServerMessage(r.response._data.message):r.response&&r.response._data?this.serverMessage.setServerMessage(r.response._data):this.serverMessage.setServerMessage(r.message):r.response&&r.response._data&&r.response._data.message?this.serverMessage.setServerMessage(r.response._data.message):r.response&&r.response._data?this.serverMessage.setServerMessage(r.response._data):this.serverMessage.setServerMessage(r))},afterLogout(){x.remove("token"),x.remove("user"),this.user.setToken(""),this.user.setUserToNull(),this.user.removeUser(),setTimeout(()=>this.$router.push({path:"/"+this.accountParameterToUrl+"login"}),2e3)},logout(){this.api("/api/host/logout",{method:"POST"}).then(()=>this.afterLogout()).catch(()=>this.afterLogout())},afterPerfil(o){this.perfil=o},getPerfil(){this.api("/api/host/profile/getUserProfile",{method:"POST"}).then(o=>this.afterPerfil(o)).catch(()=>this.logout())},setConfigCookies(){let o=localStorage.getItem(this.accountParameterToUrl.replace(/^\/+|\/+$/g,"")+"_config");if(o&&(o=JSON.parse(o)),o)this.user.setConfig(this.accountParameterToUrl,o);else try{this.user.fetchConfig(this.accountParameterToUrl)}catch{}},setUserCookies(){let o=localStorage.getItem("token");if(o){this.user.setToken(o);let e=localStorage.getItem("user");if(e)this.user.updateUser(JSON.parse(e));else{console.log("test");try{this.user.fetchUser()}catch{}}}}}},N={key:0,class:s("p-5 sm:p-20")},V={class:s("relative rounded-tr-3xl rounded-bl-3xl sm:m-auto sm:w-1/2 border-2 border-[color:var(--naranja)] bg-[color:var(--gris)] overflow-hidden")},D={class:s("p-6 py-[120px] relative z-50")},L={class:s("relative")},O=["onUpdate:modelValue"],B={class:s("relative")},F=["onUpdate:modelValue"],I={class:s("flex items-end")},z=["onClick"],E={class:s("grid grid-cols-3 gap-4 mt-5")},J={class:s("relative")},G={class:s("relative")},A={class:s("flex items-end")},K=["innerHTML"],R={class:s("relative sm:mx-auto sm:w-1/2 z-50 contenedor-botones-formularios")},q={class:s("flex justify-center")},Q={class:s("contenedor-boton-left-formularios")},W={class:s("contenedor-boton-right-formularios")};function X(o,e,n,r,a,p){const g=y;return i(),m("div",null,[e[7]||(e[7]=t("h2",{class:s("leading-10 text-xl font-bold text-center mb-4 bg-[color:var(--naranja)] py-6 h-[100px] flex items-center justify-center")},"Hábitos",-1)),a.user.user?(i(),m("div",N,[t("div",V,[e[3]||(e[3]=t("img",{src:T,class:s("absolute"),style:{"min-width":"1100px",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},null,-1)),t("div",D,[(i(!0),m(H,null,P(a.perfil.habits,l=>(i(),m("div",{key:l.id,class:s("grid grid-cols-3 gap-4")},[t("div",null,[t("div",L,[c(t("input",{type:"text","onUpdate:modelValue":d=>l.name=d,placeholder:"Nombre",class:s("w-full text-[color:var(--blanco)] text-center text-3xl rounded-tl-3xl rounded-br-3xl bg-[color:var(--gris)] py-4 pl-10 pr-3 border-2 border-[color:var(--gris)] focus:border-[color:var(--naranja)]")},null,8,O),[[u,l.name]])])]),t("div",null,[t("div",B,[c(t("input",{type:"text","onUpdate:modelValue":d=>l.order=d,placeholder:"Orden",class:s("w-full text-[color:var(--blanco)] text-center text-3xl rounded-tl-3xl rounded-br-3xl bg-[color:var(--gris)] py-4 pl-10 pr-3 border-2 border-[color:var(--gris)] focus:border-[color:var(--naranja)]")},null,8,F),[[u,l.order]])])]),t("div",I,[t("button",{onClick:d=>p.postHabit(l.id,l.name,l.order),class:s("bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded")}," Guardar ",8,z)])]))),128)),t("div",E,[t("div",null,[t("div",J,[c(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=l=>a.newHabit.name=l),placeholder:"Nombre",class:s("w-full text-[color:var(--blanco)] text-center text-3xl rounded-tl-3xl rounded-br-3xl bg-[color:var(--gris)] py-4 pl-10 pr-3 border-2 border-[color:var(--gris)] focus:border-[color:var(--naranja)]")},null,512),[[u,a.newHabit.name]])])]),t("div",null,[t("div",G,[c(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=l=>a.newHabit.order=l),placeholder:"Orden",class:s("w-full text-[color:var(--blanco)] text-center text-3xl rounded-tl-3xl rounded-br-3xl bg-[color:var(--gris)] py-4 pl-10 pr-3 border-2 border-[color:var(--gris)] focus:border-[color:var(--naranja)]")},null,512),[[u,a.newHabit.order]])])]),t("div",A,[t("button",{onClick:e[2]||(e[2]=l=>p.postHabit(0,a.newHabit.name,a.newHabit.order)),class:s("bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded")}," Crear ")])]),a.serverMessage.serverMessage?(i(),m("div",{key:0,innerHTML:a.serverMessage.serverMessage,class:s("text-[color:var(--rojo)] w-full text-center")},null,8,K)):b("",!0)])]),t("div",R,[t("div",q,[t("div",Q,[f(g,{to:"/",class:s("flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-[color:var(--gris)] font-semibold bg-[color:var(--naranja)] leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-[color:var(--naranja)] hover:bg-[color:var(--gris)] border-[color:var(--naranja)] border-2 cursor-pointer")},{default:v(()=>e[4]||(e[4]=[h(" Volver a la Home ")])),_:1})]),e[6]||(e[6]=t("div",{class:s("w-2 sm:w-12")},"   ",-1)),t("div",W,[f(g,{to:"/"+a.accountParameterToUrl+"perfil",class:s("flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-[color:var(--gris)] font-semibold bg-[color:var(--naranja)] leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-[color:var(--naranja)] hover:bg-[color:var(--gris)] border-[color:var(--naranja)] border-2 cursor-pointer")},{default:v(()=>e[5]||(e[5]=[h(" Ir al Perfil ")])),_:1},8,["to"])])])])])):b("",!0),e[8]||(e[8]=t("div",{class:"hidden /* Flex */ flex flex-row flex-col flex-wrap flex-nowrap flex-1 flex-auto flex-initial flex-none items-start items-end items-center items-baseline items-stretch justify-start justify-end justify-center justify-between justify-around justify-evenly /* Gap */ gap-0 gap-1 gap-2 gap-3 gap-4 gap-5 gap-6 gap-8 gap-10 gap-12 gap-x-0 gap-x-1 gap-x-2 gap-x-3 gap-x-4 gap-x-5 gap-x-6 gap-x-8 gap-x-10 gap-x-12 gap-y-0 gap-y-1 gap-y-2 gap-y-3 gap-y-4 gap-y-5 gap-y-6 gap-y-8 gap-y-10 gap-y-12 /* Margin */ m-0 m-1 m-2 m-3 m-4 m-5 m-6 m-8 m-10 m-12 mx-0 mx-1 mx-2 mx-3 mx-4 mx-5 mx-6 mx-8 mx-10 mx-12 my-0 my-1 my-2 my-3 my-4 my-5 my-6 my-8 my-10 my-12 mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-8 mt-10 mt-12 mr-0 mr-1 mr-2 mr-3 mr-4 mr-5 mr-6 mr-8 mr-10 mr-12 mb-0 mb-1 mb-2 mb-3 mb-4 mb-5 mb-6 mb-8 mb-10 mb-12 ml-0 ml-1 ml-2 ml-3 ml-4 ml-5 ml-6 ml-8 ml-10 ml-12 -m-0 -m-1 -m-2 -m-3 -m-4 -m-5 -m-6 -m-8 -m-10 -m-12 -mx-0 -mx-1 -mx-2 -mx-3 -mx-4 -mx-5 -mx-6 -mx-8 -mx-10 -mx-12 -my-0 -my-1 -my-2 -my-3 -my-4 -my-5 -my-6 -my-8 -my-10 -my-12 -mt-0 -mt-1 -mt-2 -mt-3 -mt-4 -mt-5 -mt-6 -mt-8 -mt-10 -mt-12 -mr-0 -mr-1 -mr-2 -mr-3 -mr-4 -mr-5 -mr-6 -mr-8 -mr-10 -mr-12 -mb-0 -mb-1 -mb-2 -mb-3 -mb-4 -mb-5 -mb-6 -mb-8 -mb-10 -mb-12 -ml-0 -ml-1 -ml-2 -ml-3 -ml-4 -ml-5 -ml-6 -ml-8 -ml-10 -ml-12 /* Márgenes con auto */ m-auto mx-auto my-auto mt-auto mr-auto mb-auto ml-auto /* Flex order */ order-1 order-2 order-3 order-4 order-5 order-6 order-7 order-8 order-9 order-10 order-11 order-12 order-first order-last order-none /* Flex grow & shrink */ flex-grow-0 flex-grow flex-shrink-0 flex-shrink /* Flex basis */ basis-0 basis-1 basis-2 basis-3 basis-4 basis-6 basis-8 basis-10 basis-12 basis-auto basis-full basis-1/2 basis-1/3 basis-2/3 basis-1/4 basis-2/4 basis-3/4 /* Self alignment */ self-auto self-start self-end self-center self-stretch self-baseline"}," ",-1))])}const te=k(C,[["render",X]]);export{te as _};
