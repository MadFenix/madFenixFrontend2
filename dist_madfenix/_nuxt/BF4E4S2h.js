import{u as P,a as C,b as U}from"./CbYhLwFw.js";import{_ as N,E as B,u as O,h as q,H as w,o as r,c as a,a as s,F as t,M as z,N as E,d as I,L as l}from"./DGo_ue8r.js";const V={middleware:"auth",data(){return{user:P(),settings:C(),serverMessage:U(),api:null,seasonDetails:null,route:B(),accountParameterToUrl:""}},mounted(){var e,c,u,o;this.setUserCookies(),this.setBackground(),window.location.hostname=="our.welore.io"||window.location.hostname=="localhost"?this.accountParameterToUrl=this.route.params.account?this.route.params.account+"/":"":this.accountParameterToUrl="",this.setConfigCookies(),O({title:"Temporada - "+((c=(e=this.user.config)==null?void 0:e.config)==null?void 0:c.name_ecosystem),meta:[{hid:"description",name:"description",content:"Temporada en "+((o=(u=this.user.config)==null?void 0:u.config)==null?void 0:o.name_ecosystem)}]});const{$api:i}=q();this.api=i,this.getSeasonDetails()},computed:{},methods:{setBackground(){(window.location.hostname=="madfenix.com"||window.location.hostname=="www.madfenix.com")&&(document.getElementById("container-global").style.background="transparent url('/img/perfil/back_temp.jpg') no-repeat top center")},afterLogout(){w.remove("token"),w.remove("user"),this.user.setToken(""),this.user.setUserToNull(),this.user.removeUser(),setTimeout(()=>this.$router.push({path:"/"+this.accountParameterToUrl+"login"}),2e3)},logout(){this.api("/api/host/logout",{method:"POST"}).then(()=>this.afterLogout()).catch(()=>this.afterLogout())},afterSeasonDetails(i){this.seasonDetails=i},getSeasonDetails(){this.api("/api/host/season/seasonDetails",{method:"GET"}).then(i=>this.afterSeasonDetails(i)).catch(()=>this.logout())},canjearPremio(i){this.api("/api/host/season/redeemSeasonLvl",{method:"POST",body:{level:i}}).then(()=>this.getSeasonDetails()).catch(e=>e.message?e.message==="The given data was invalid."?this.serverMessage.setServerMessage("Datos inválidos."):e.response&&e.response._data&&e.response._data.message?this.serverMessage.setServerMessage(e.response._data.message):e.response&&e.response._data?this.serverMessage.setServerMessage(e.response._data):this.serverMessage.setServerMessage(e.message):e.response&&e.response._data&&e.response._data.message?this.serverMessage.setServerMessage(e.response._data.message):e.response&&e.response._data?this.serverMessage.setServerMessage(e.response._data):this.serverMessage.setServerMessage(e))},setConfigCookies(){let i=localStorage.getItem(this.accountParameterToUrl.replace(/^\/+|\/+$/g,"")+"_config");if(i&&(i=JSON.parse(i)),i)this.user.setConfig(this.accountParameterToUrl,i);else try{this.user.fetchConfig(this.accountParameterToUrl)}catch{}},setUserCookies(){let i=localStorage.getItem("token");if(i){this.user.setToken(i);let e=localStorage.getItem("user");if(e)this.user.updateUser(JSON.parse(e));else{console.log("test");try{this.user.fetchUser()}catch{}}}}}},F={key:0},J={class:t("text-[color:var(--naranja)] w-full text-center py-12")},A=["innerHTML"],G={class:t("relative rounded-tl-3xl rounded-br-3xl min-h-[300px] mx-3 sm:m-auto sm:w-2/3 border border-[color:var(--blanco)] bg-[color:var(--gris)] overflow-hidden")},K=["src"],Q={class:t("relative min-h-[300px] mb-0 p-6 z-50")},W={class:t("absolute w-full bottom-0 px-12 py-3")},X={class:t("flex items-end justify-end")},Y=["innerHTML"],Z={class:t("relative mx-3 sm:m-auto sm:w-2/3")},$={class:t("flex items-end justify-end title-season")},R=["innerHTML"],ee=["innerHTML"],se=["innerHTML"],te={class:t("grid grid-cols-1 sm:grid-cols-2 gap-12 mx-3 xl:mx-auto xl:w-2/3 mt-12")},oe={class:t("relative rounded-tr-3xl rounded-bl-3xl border-2 border-[color:var(--naranja)] bg-[color:var(--gris)] overflow-hidden")},ne={class:t("p-6 pt-[50px] pb-[70px] relative z-50")},ie={class:t("font-extrabold tracking-tight text-[color:var(--naranja)] w-full text-center lvl-season-reward")},re=["innerHTML"],ae=["innerHTML"],le={class:t("text-4xl min-h-[150px] tracking-tight text-[color:var(--blanco)] sm:text-3xl w-full text-center")},ce=["innerHTML"],ue=["innerHTML"],me=["innerHTML"],de=["innerHTML"],he=["innerHTML"],ge=["innerHTML"],_e={class:t("relative sm:mx-auto sm:w-1/2 z-50 contenedor-botones-formularios")},pe={class:t("flex justify-center")},xe={class:t("contenedor-boton-right-formularios")},fe={key:0,class:t("flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-[color:var(--gris)] font-semibold bg-[color:var(--naranja)] leading-snug transition ease-in-out h-10 lg:h-14 duration-250 border-[color:var(--naranja)] border-2")},ve={key:1,class:t("flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-[color:var(--gris)] font-semibold bg-[color:var(--naranja)] leading-snug transition ease-in-out h-10 lg:h-14 duration-250 border-[color:var(--naranja)] border-2")},be=["onClick"],Te={key:3,class:t("flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-[color:var(--gris)] font-semibold bg-[color:var(--naranja)] leading-snug transition ease-in-out h-10 lg:h-14 duration-250 border-[color:var(--naranja)] border-2")};function Me(i,e,c,u,o,D){var m,d,h,g,_,p,x,f,v,b;return o.seasonDetails&&o.user?(r(),a("div",F,[s("h1",J,[s("span",{innerHTML:((d=(m=o.user.config)==null?void 0:m.theme)==null?void 0:d.title_season)??"Season"},null,8,A)]),s("div",G,[s("img",{src:((g=(h=o.user.config)==null?void 0:h.theme)==null?void 0:g.icon_rewards_pass)??"https://reports.madfenix.com/welore/demo-assets/rewards-pass/header2.png",class:t("absolute"),style:{"min-width":"1100px",top:"50%",left:"50%",transform:"translate(-50%, -40%)"}},null,8,K),s("div",Q,[s("div",W,[s("div",X,[s("h2",{class:t("mt-4 text-4xl font-extrabold text-[color:var(--blanco)] md:mt-5 sm:text-5xl md:text-6xl title-season"),innerHTML:o.seasonDetails.name},null,8,Y)])])])]),s("div",Z,[s("div",$,[s("p",{class:t("text-2xl font-medium tracking-tight text-white sm:text-3xl lg:text-4xl lg:leading-tight mt-4"),innerHTML:(((p=(_=o.user.config)==null?void 0:_.theme)==null?void 0:p.title_season_level)??"Level")+": "+(o.seasonDetails.user_season_level??0)+"   "},null,8,R),s("p",{class:t("text-2xl font-medium tracking-tight text-white sm:text-3xl lg:text-4xl lg:leading-tight mt-4"),innerHTML:(((f=(x=o.user.config)==null?void 0:x.theme)==null?void 0:f.title_season_points)??"Points")+": "+(o.seasonDetails.user_season_points??0)+"   "},null,8,ee),s("p",{class:t("text-2xl font-medium tracking-tight text-white sm:text-3xl lg:text-4xl lg:leading-tight mt-4"),innerHTML:(((b=(v=o.user.config)==null?void 0:v.theme)==null?void 0:b.title_season_premium)??"Premium")+": "+(o.seasonDetails.user_season_premium?"Si":"No")},null,8,se)])]),s("div",te,[o.seasonDetails.seasonRewards?(r(!0),a(z,{key:0},E(o.seasonDetails.seasonRewards,n=>{var T,M,L,k,y,H,S,j;return r(),a("div",{key:n.id},[s("div",oe,[s("div",ne,[s("div",ie,[s("span",{innerHTML:((M=(T=o.user.config)==null?void 0:T.theme)==null?void 0:M.title_season_level)??"Level"},null,8,re),e[0]||(e[0]=I(": ")),s("span",{innerHTML:n.level},null,8,ae)]),s("div",le,[s("span",{class:t("text-2xl sm:text-3xl"),innerHTML:n.required_points+" "+(((k=(L=o.user.config)==null?void 0:L.theme)==null?void 0:k.title_season_points)??"Points")},null,8,ce),e[1]||(e[1]=s("br",null,null,-1)),e[2]||(e[2]=s("span",{class:t("font-extrabold")},"Premio:",-1)),e[3]||(e[3]=s("br",null,null,-1)),n.oro?(r(),a("span",{key:0,innerHTML:n.oro+" "+(((H=(y=o.user.config)==null?void 0:y.theme)==null?void 0:H.title_coin_premium)??"Oro")},null,8,ue)):l("",!0),n.plumas?(r(),a("span",{key:1,innerHTML:n.plumas+" "+(((j=(S=o.user.config)==null?void 0:S.theme)==null?void 0:j.title_coin_free)??"Plata")},null,8,me)):l("",!0),n.nft?(r(),a("span",{key:2,innerHTML:"1 Ítem "+n.nft.name+". Límite: "},null,8,de)):l("",!0),n.max_nft_rewards?(r(),a("span",{key:3,innerHTML:n.max_nft_rewards},null,8,he)):l("",!0),n.custom_reward?(r(),a("span",{key:4,innerHTML:n.custom_reward},null,8,ge)):l("",!0)])])]),s("div",_e,[s("div",pe,[e[4]||(e[4]=s("div",{class:t("grow")},"   ",-1)),s("div",xe,[n.redeemed?(r(),a("a",fe," Canjeado ")):n.required_points<o.seasonDetails.user_season_points&&!(o.seasonDetails.user_season_premium>0)&&!(n.level==1||n.level==5||n.level==10||n.level==15||n.level==20)?(r(),a("a",ve," Necesitas el pase premium ")):n.required_points<o.seasonDetails.user_season_points?(r(),a("a",{key:2,onClick:Le=>D.canjearPremio(n.level),class:t("flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-[color:var(--gris)] font-semibold bg-[color:var(--naranja)] leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-[color:var(--naranja)] hover:bg-[color:var(--gris)] border-[color:var(--naranja)] border-2 cursor-pointer")}," Canjea el premio ",8,be)):(r(),a("a",Te," Por desbloquear "))]),e[5]||(e[5]=s("div",{class:t("grow")},"   ",-1))])])])}),128)):l("",!0)])])):l("",!0)}const He=N(V,[["render",Me]]);export{He as _};
