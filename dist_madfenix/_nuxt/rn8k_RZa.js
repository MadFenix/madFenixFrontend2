import{_ as b}from"./B0fFkNdG.js";import{_ as x,E as y,u as w,h as k,P as T,H as g,o as n,c as a,M as f,N as m,F as r,a as s,b as _,w as p,d as v,L as u}from"./BkIvzsUW.js";import{u as j,a as P,b as U}from"./QSJ8XGow.js";const S={middleware:"auth",data(){return{user:j(),settings:P(),serverMessage:U(),api:null,perfil:null,nft_id:null,categorySelected:null,subcategorySelected:null,route:y(),accountParameterToUrl:""}},mounted(){var e,i,l,c;this.setUserCookies(),this.setBackground(),window.location.hostname=="our.welore.io"||window.location.hostname=="localhost"?this.accountParameterToUrl=this.route.params.account?this.route.params.account+"/":"":this.accountParameterToUrl="",this.setConfigCookies(),w({title:"Colección - "+((i=(e=this.user.config)==null?void 0:e.config)==null?void 0:i.name_ecosystem),meta:[{hid:"description",name:"description",content:"Colección en "+((c=(l=this.user.config)==null?void 0:l.config)==null?void 0:c.name_ecosystem)}]});const{$api:t}=k();this.api=t,this.nft_id=(this._.provides[T]||this.$route).query.nft_id,this.getPerfil()},computed:{nfts(){let t=[];if(this.perfil&&this.perfil.nfts)for(let e=0;e<this.perfil.nfts.length;e++)this.nft_id==this.perfil.nfts[e].nft_id&&t.push(this.perfil.nfts[e]);return t},nfts_hedera(){let t=[];if(this.perfil&&this.perfil.nfts_hedera)for(let e=0;e<this.perfil.nfts_hedera.length;e++)this.nft_id==this.perfil.nfts_hedera[e].nft_id&&t.push(this.perfil.nfts_hedera[e]);return t},nftCollections(){let t=[],e=null;if(this.perfil&&this.perfil.nft_categories)for(let i=0;i<this.perfil.nft_categories.length;i++)for(let l=0;l<this.perfil.nft_categories[i].nfts.length;l++)e=this.perfil.nft_categories[i].nfts[l],this.nft_id==e.id&&t.push({nft_id:e.id,category:e.category,subcategory:e.subcategory,name:e.name,short_description:e.short_description,portrait_image:e.portrait_image,featured_image:e.featured_image,token_number:e.token_number});return t}},methods:{setBackground(){(window.location.hostname=="madfenix.com"||window.location.hostname=="www.madfenix.com")&&(document.getElementById("container-global").style.background="transparent url('/img/perfil/back_temp.jpg') no-repeat top center")},afterLogout(){g.remove("token"),g.remove("user"),this.user.setToken(""),this.user.setUserToNull(),this.user.removeUser(),setTimeout(()=>this.$router.push({path:"/"+this.accountParameterToUrl+"login"}),2e3)},logout(){this.api("/api/host/logout",{method:"POST"}).then(()=>this.afterLogout()).catch(()=>this.afterLogout())},afterPerfil(t){this.perfil=t},getPerfil(){this.api("/api/host/profile/getUserProfile",{method:"POST"}).then(t=>this.afterPerfil(t)).catch(()=>this.logout())},countNFTsByid(t){let e=0;if(this.perfil&&this.perfil.nfts)for(let i=0;i<this.perfil.nfts.length;i++)this.perfil.nfts[i].nft_id==t&&(e+=1);if(this.perfil&&this.perfil.nfts_hedera)for(let i=0;i<this.perfil.nfts_hedera.length;i++)this.perfil.nfts_hedera[i].nft_id==t&&(e+=1);return e},setConfigCookies(){let t=localStorage.getItem(this.accountParameterToUrl.replace(/^\/+|\/+$/g,"")+"_config");if(t&&(t=JSON.parse(t)),t)this.user.setConfig(this.accountParameterToUrl,t);else try{this.user.fetchConfig(this.accountParameterToUrl)}catch{}},setUserCookies(){let t=localStorage.getItem("token");if(t){this.user.setToken(t);let e=localStorage.getItem("user");if(e)this.user.updateUser(JSON.parse(e));else{console.log("test");try{this.user.fetchUser()}catch{}}}}}},C={key:0,class:r("mb-4")},N={class:r("relative rounded-tl-3xl rounded-br-3xl min-h-[300px] mx-3 mt-12 sm:mx-auto sm:w-2/3 bg-[color:var(--gris)] border border-[color:var(--naranja)] overflow-hidden")},L=["src"],H={class:r("relative sm:mx-auto sm:w-1/2 z-50 contenedor-botones-formularios")},M={class:r("flex justify-center")},z={class:r("contenedor-boton-left-formularios")},B={class:r("contenedor-boton-right-formularios")},F=["innerHTML"],V={key:1,class:r("grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 mt-6 mx-3 sm:mx-auto sm:w-2/3")},I={class:r("relative rounded-tr-3xl rounded-bl-3xl border-2 border-[color:var(--naranja)] bg-[color:var(--gris)] overflow-hidden")},O=["src","alt","title"],R=["innerHTML"],E={key:0,class:r("relative sm:mx-auto sm:w-1/2 z-50 contenedor-botones-formularios")},J={class:r("flex justify-center")},q={class:r("relative rounded-tr-3xl rounded-bl-3xl border-2 border-[color:var(--naranja)] bg-[color:var(--gris)] overflow-hidden")},A=["src","alt","title"],D=["innerHTML"];function G(t,e,i,l,c,d){const h=b;return c.user.user&&c.perfil?(n(),a("div",C,[d.nftCollections?(n(!0),a(f,{key:0},m(d.nftCollections,o=>(n(),a("div",{class:r("w-full"),key:o.nft_id},[s("div",N,[s("img",{src:o.featured_image,class:r("absolute"),style:{"min-width":"1100px",top:"50%",left:"50%",transform:"translate(-50%, -40%)"}},null,8,L),e[0]||(e[0]=s("div",{class:r("relative min-h-[300px] mb-0 p-6 z-50")},"   ",-1))]),s("div",H,[s("div",M,[s("div",z,[_(h,{to:"/"+c.accountParameterToUrl+"perfil",class:r("flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-[color:var(--gris)] font-semibold bg-[color:var(--naranja)] leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-[color:var(--naranja)] hover:bg-[color:var(--gris)] border-[color:var(--naranja)] border-2 cursor-pointer")},{default:p(()=>e[1]||(e[1]=[v(" Volver al Perfil ")])),_:1},8,["to"])]),e[2]||(e[2]=s("div",{class:r("w-2 sm:w-12")},"   ",-1)),s("div",B,[s("div",{class:r("flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-[color:var(--gris)] font-semibold bg-[color:var(--naranja)] leading-snug transition ease-in-out h-10 lg:h-14 duration-250 border-[color:var(--naranja)] border-2"),innerHTML:o.name+" ("+d.countNFTsByid(o.nft_id)+")"},null,8,F)])])])]))),128)):u("",!0),c.perfil?(n(),a("div",V,[(n(!0),a(f,null,m(d.nfts,o=>(n(),a("div",{key:o.id},[s("div",I,[s("img",{src:o.image,style:{width:"100%"},alt:o.name,title:o.name},null,8,O),s("div",{class:r("px-6 mt-3 mb-10 relative z-50 w-full text-center text-[color:var(--blanco)]"),innerHTML:o.name},null,8,R)]),o.nft.token_number>0?(n(),a("div",E,[s("div",J,[s("div",null,[_(h,{to:"/transfiere-item-a-hedera/?item_identification_id="+o.id+"&nft_token_id="+o.nft.token_props+"."+o.nft.token_realm+"."+o.nft.token_number,class:r("flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-[color:var(--gris)] font-semibold bg-[color:var(--naranja)] leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-[color:var(--naranja)] hover:bg-[color:var(--gris)] border-[color:var(--naranja)] border-2 cursor-pointer")},{default:p(()=>e[3]||(e[3]=[v(" Transferir ")])),_:2},1032,["to"])])])])):u("",!0)]))),128)),(n(!0),a(f,null,m(d.nfts_hedera,o=>(n(),a("div",{key:o.id},[s("div",q,[s("img",{src:o.image,style:{width:"100%"},alt:o.name,title:o.name},null,8,A),s("div",{class:r("px-6 mt-3 mb-10 relative z-50 w-full text-center text-[color:var(--blanco)]"),innerHTML:o.name},null,8,D)]),e[4]||(e[4]=s("div",{class:r("relative sm:mx-auto sm:w-1/2 z-50 contenedor-botones-formularios")},[s("div",{class:r("flex justify-center")},[s("div",null,[s("div",{class:r("flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-[color:var(--gris)] font-semibold bg-[color:var(--naranja)] leading-snug transition ease-in-out h-10 lg:h-14 duration-250 border-[color:var(--naranja)] border-2")}," Hedera ")])])],-1))]))),128))])):u("",!0)])):u("",!0)}const X=x(S,[["render",G]]);export{X as _};
