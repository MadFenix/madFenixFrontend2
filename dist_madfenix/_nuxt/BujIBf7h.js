import{_ as p}from"./DIQ4f-ij.js";import{u as x,a as f,b as h}from"./DqRQEqSY.js";import{_ as g,u as v,e as b,n as w,f as d,c as n,a as e,g as _,v as y,h as a,b as M,w as T,d as u,F as j,r as k,o as i}from"./C7_LvVcW.js";import{_ as S}from"./DhBiK6sl.js";const C={middleware:"auth",data(){return{user:x(),settings:f(),serverMessage:h(),api:null,couponData:{coupon:""},showProductsModal:!1,imageItemsReveal:!1,videoNewItems:"/video/MadFenixLogoReveal.mp4",itemsPurchaseToShow:null}},computed:{},mounted(){v({title:"Canjear cupón de plumas - Mad Fénix Games",meta:[{hid:"description",name:"description",content:"Canjear cupóon de plumas en Mad Fénix Games."}]}),this.setUserCookies(),this.setBackground();const{$api:o}=b();this.api=o},methods:{revealImageItems(){this.imageItemsReveal=!0},setBackground(){document.getElementById("container-global").style.background="transparent url('/img/perfil/back_temp.jpg') no-repeat top center"},openNewItems(o){this.showEventModal=!1,this.event=null,this.videoNewItems=o.video_purchase,this.itemsPurchaseToShow=o,o.video_purchase?this.imageItemsReveal=!1:this.imageItemsReveal=!0,this.showProductsModal=!0,o.video_purchase&&w(()=>{document.getElementById("video-storemadfenix").play()})},afterUseCoupon(o){this.openNewItems(o)},useCoupon(){this.api("/api/coupon/useCoupon",{method:"POST",body:this.couponData}).then(o=>this.afterUseCoupon(o)).catch(o=>o.message?o.message==="The given data was invalid."?this.serverMessage.setServerMessage("Datos inválidos."):this.serverMessage.setServerMessage(o.message):this.serverMessage.setServerMessage("Error."))},setUserCookies(){let o=d.get("token");if(o){this.user.setToken(o);let s=d.get("user");if(s)this.user.updateUser(JSON.parse(s));else{console.log("test");try{this.user.fetchUser()}catch{}}}}}},I={key:0,class:"p-5 sm:p-20"},P={class:"relative rounded-tr-3xl rounded-bl-3xl sm:m-auto sm:w-1/2 border-2 border-madfenix-naranja bg-madfenix-gris overflow-hidden"},L={class:"p-6 py-[120px] relative z-50"},N={class:"mt-5"},H={class:"relative"},B=["innerHTML"],R={class:"relative sm:mx-auto sm:w-1/2 z-50 contenedor-botones-formularios"},U={class:"flex justify-center"},z={class:"contenedor-boton-left-formularios"},D={class:"contenedor-boton-right-formularios"},E={key:0,tabindex:"-1","aria-hidden":"true",class:"overflow-y-auto overflow-x-hidden bg-madfenix-gris bg-opacity-50 fixed top-0 right-0 left-0 z-50 w-full h-modal md:h-full"},V={class:"flex items-center justify-center p-4 w-full h-screen"},F={class:"bg-madfenix-gris text-madfenix-blanco rounded-lg shadow border border-madfenix-blanco"},G={class:"flex justify-between items-start p-4 rounded-t border-b border-madfenix-blanco"},O={class:"w-full p-3 overflow-y-auto",style:{height:"500px","max-width":"700px"}},A=["src"],J={key:1,class:"grid grid-cols-2 md:grid-cols-3 gap-2"},q={class:"relative rounded-tr-3xl rounded-bl-3xl border-2 border-madfenix-naranja bg-madfenix-gris overflow-hidden"},K=["src","alt","title"],Q=["innerHTML"],W={key:0},X={class:"relative rounded-tr-3xl rounded-bl-3xl border-2 border-madfenix-naranja bg-madfenix-gris overflow-hidden"},Y=["alt","title"],Z=["innerHTML"],$={key:1},ee={class:"relative rounded-tr-3xl rounded-bl-3xl border-2 border-madfenix-naranja bg-madfenix-gris overflow-hidden"},se=["alt","title"],te=["innerHTML"];function oe(o,s,m,re,t,l){const c=p;return i(),n("div",null,[s[10]||(s[10]=e("h2",{class:"leading-10 text-xl font-bold text-center mb-4 bg-madfenix-naranja py-6 h-[100px] flex items-center justify-center"},"Canjear Cupón",-1)),t.user.user?(i(),n("div",I,[e("div",P,[s[4]||(s[4]=e("img",{src:S,class:"absolute",style:{"min-width":"1100px",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},null,-1)),e("div",L,[e("div",N,[e("div",H,[_(e("input",{id:"coupon",type:"text","onUpdate:modelValue":s[0]||(s[0]=r=>t.couponData.coupon=r),class:"w-full text-madfenix-blanco text-center text-3xl rounded-tl-3xl rounded-br-3xl bg-madfenix-gris py-4 pl-10 pr-3 border-2 border-madfenix-gris focus:border-madfenix-naranja",placeholder:"Ingrese su cupón"},null,512),[[y,t.couponData.coupon]])])]),t.serverMessage.serverMessage?(i(),n("div",{key:0,innerHTML:t.serverMessage.serverMessage,class:"text-madfenix-rojo w-full text-center"},null,8,B)):a("",!0)])]),e("div",R,[e("div",U,[e("div",z,[M(c,{to:"/perfil",class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer"},{default:T(()=>s[5]||(s[5]=[u(" Volver al Perfil ")])),_:1})]),s[6]||(s[6]=e("div",{class:"w-2 sm:w-12"},"   ",-1)),e("div",D,[e("button",{onClick:s[1]||(s[1]=(...r)=>l.useCoupon&&l.useCoupon(...r)),class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer"}," Canjear ")])])]),t.showProductsModal?(i(),n("div",E,[e("div",V,[e("div",F,[e("div",G,[s[8]||(s[8]=e("h3",{class:"text-xl font-semibold"}," ¡Tus nuevos ítems! ",-1)),e("button",{type:"button",onClick:s[2]||(s[2]=r=>{t.showProductsModal=!1,t.imageItemsReveal=!1}),class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white"},s[7]||(s[7]=[e("svg",{"aria-hidden":"true",class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),e("span",{class:"sr-only"},"Cerrar pantalla",-1)]))]),e("div",O,[t.imageItemsReveal?a("",!0):(i(),n("video",{key:0,id:"video-storemadfenix",class:"rounded rounded-3xl border border-2 border-madfenix-gris",playsinline:"",onEnded:s[3]||(s[3]=r=>l.revealImageItems())},[e("source",{src:t.videoNewItems,type:"video/mp4"},null,8,A),s[9]||(s[9]=u(" Tu navegador no soporta el video. "))],32)),t.imageItemsReveal&&t.itemsPurchaseToShow?(i(),n("div",J,[(i(!0),n(j,null,k(t.itemsPurchaseToShow.nfts,r=>(i(),n("div",{key:r.id},[e("div",q,[e("img",{src:r.image,style:{width:"100%"},alt:r.name,title:r.name},null,8,K),e("div",{class:"px-6 mt-3 mb-10 relative z-50 w-full text-center text-madfenix-blanco",innerHTML:r.name},null,8,Q)])]))),128)),t.itemsPurchaseToShow.plumas?(i(),n("div",W,[e("div",X,[e("img",{src:"/img/perfil/pluma.png",style:{width:"100%"},alt:t.itemsPurchaseToShow.plumas,title:t.itemsPurchaseToShow.plumas},null,8,Y),e("div",{class:"px-6 mt-3 mb-10 relative z-50 w-full text-center text-madfenix-blanco",innerHTML:t.itemsPurchaseToShow.plumas},null,8,Z)])])):a("",!0),t.itemsPurchaseToShow.oro?(i(),n("div",$,[e("div",ee,[e("img",{src:"/img/perfil/oro.png",style:{width:"100%"},alt:t.itemsPurchaseToShow.oro,title:t.itemsPurchaseToShow.oro},null,8,se),e("div",{class:"px-6 mt-3 mb-10 relative z-50 w-full text-center text-madfenix-blanco",innerHTML:t.itemsPurchaseToShow.oro},null,8,te)])])):a("",!0)])):a("",!0)])])])])):a("",!0)])):a("",!0)])}const de=g(C,[["render",oe]]);export{de as default};
