import{u as w,a as k,b as M}from"./COtTB0B9.js";import{_ as T,E as P,u as S,h as I,H as f,I as U,p as H,o as n,c as l,a as o,M as x,N as b,F as a,L as c,e as d,d as y}from"./BqLSPAkt.js";const L={middleware:"auth",data(){return{user:w(),settings:k(),serverMessage:M(),api:null,storeDetails:null,showProductsModal:!1,imageItemsReveal:!1,videoNewItems:"/video/MadFenixLogoReveal.mp4",itemsPurchaseToShow:null,route:P(),accountParameterToUrl:""}},mounted(){this.setUserCookies(),this.setBackground(),window.location.hostname=="our.welore.io"?this.accountParameterToUrl=this.route.params.account?this.route.params.account+"/":"":this.accountParameterToUrl=window.location.hostname.split(".")[0]+"/",this.setConfigCookies(),S({title:"Tienda - Mad Fénix",meta:[{hid:"description",name:"description",content:"Tienda en Mad Fénix."}],script:[{async:!0,src:"https://js.stripe.com/v3/buy-button.js"}]});const{$api:t}=I();this.api=t,this.getStoreDetails()},computed:{},methods:{revealImageItems(){this.imageItemsReveal=!0},setBackground(){window.location.hostname=="madfenix.com"&&(document.getElementById("container-global").style.background="transparent url('/img/perfil/back_temp.jpg') no-repeat top center")},afterLogout(){f.remove("token"),f.remove("user"),this.user.setToken(""),this.user.setUserToNull(),this.user.removeUser(),setTimeout(()=>this.$router.push({path:"/"+this.accountParameterToUrl+"login"}),2e3)},logout(){this.api("/api/host/logout",{method:"POST"}).then(()=>this.afterLogout()).catch(()=>this.afterLogout())},afterStoreDetails(t){this.storeDetails=t},getStoreDetails(){this.api("/api/host/store/details",{method:"GET"}).then(t=>this.afterStoreDetails(t)).catch(()=>this.logout())},openNewItems(t){t.nfts.length>0?(this.videoNewItems=t.video_purchase,this.itemsPurchaseToShow=t,t.video_purchase?this.imageItemsReveal=!1:this.imageItemsReveal=!0,this.showProductsModal=!0,t.video_purchase&&U(()=>{document.getElementById("video-storemadfenix").play()})):this.$router.push({path:"/"+this.accountParameterToUrl+"perfil"}),this.getStoreDetails()},validateProduct(t){this.api("/api/host/store/validateProductOrder",{method:"POST",body:{product_order_id:t.id}}).then(e=>this.openNewItems(e)).catch(e=>e.message?e.message==="The given data was invalid."?this.serverMessage.setServerMessage("Datos inválidos."):e.response&&e.response._data&&e.response._data.message?this.serverMessage.setServerMessage(e.response._data.message):e.response&&e.response._data?this.serverMessage.setServerMessage(e.response._data):this.serverMessage.setServerMessage(e.message):e.response&&e.response._data&&e.response._data.message?this.serverMessage.setServerMessage(e.response._data.message):e.response&&e.response._data?this.serverMessage.setServerMessage(e.response._data):this.serverMessage.setServerMessage(e))},buyProduct(t,e,m){this.api("/api/host/store/addProductToOrder",{method:"POST",body:{product_id:t}}).then(i=>{(e>0||m>0)&&this.validateProduct(i)}).catch(i=>i.message?i.message==="The given data was invalid."?this.serverMessage.setServerMessage("Datos inválidos."):i.response&&i.response._data&&i.response._data.message?this.serverMessage.setServerMessage(i.response._data.message):i.response&&i.response._data?this.serverMessage.setServerMessage(i.response._data):this.serverMessage.setServerMessage(i.message):i.response&&i.response._data&&i.response._data.message?this.serverMessage.setServerMessage(i.response._data.message):i.response&&i.response._data?this.serverMessage.setServerMessage(i.response._data):this.serverMessage.setServerMessage(i))},getPrice(t){return t.price_oro>0?'<span :class="`text-size-token-store`">'+t.price_oro+"</span> oros":'<span :class="`text-size-token-store`">'+t.price_plumas+"</span> plumas"},setConfigCookies(){let t=localStorage.getItem(this.accountParameterToUrl.replace(/^\/+|\/+$/g,"")+"_config");if(t&&(t=JSON.parse(t)),t)this.user.setConfig(this.accountParameterToUrl,t);else try{this.user.fetchConfig(this.accountParameterToUrl)}catch{}},setUserCookies(){let t=localStorage.getItem("token");if(t){this.user.setToken(t);let e=localStorage.getItem("user");if(e)this.user.updateUser(JSON.parse(e));else{console.log("test");try{this.user.fetchUser()}catch{}}}}}},R={key:0},N={class:a("px-4 py-12 md:py-16 sm:px-6 lg:px-8")},C={class:a("max-w-screen-xl mx-auto")},E={class:a("w-full max-w-3xl mx-auto text-center lg:max-w-5xl")},z={class:a("mt-4 text-4xl font-extrabold text-[color:var(--naranja)] md:mt-5 sm:text-5xl md:text-6xl")},V=["innerHTML"],D={class:a("relative z-30 grid grid-cols-1 sm:grid-cols-12 items-center justify-center mx-auto text-center px-4 sm:px-16 lg:flex-row lg:text-left")},O={class:a("sm:col-span-3 flex items-center py-6 sm:py-0 px-12 h-full text-2xl rounded-tl-3xl rounded-tr-3xl sm:rounded-tr-none bg-[color:var(--gris)] border border-[color:var(--naranja)] sm:border-r-0 font-bold sm:text-4xl")},j=["src","title","alt"],F={class:a("sm:col-span-9 px-3 sm:px-0 py-3 sm:py-0 sm:flex sm:items-center space-x-3 justify-center h-full rounded-br-3xl rounded-bl-3xl sm:rounded-bl-none bg-[color:var(--gris)] border border-[color:var(--naranja)] sm:border-l-0 sm:mr-12 lg:justify-end")},B={class:a("grow font-extrabold tracking-tight")},G={class:a("font-extrabold tracking-tight text-[color:var(--naranja)] text-4xl sm:text-5xl")},A=["innerHTML"],X=["innerHTML"],Q={class:a("botones-tokens")},J={key:6,class:a("flex cursor-pointer items-center justify-center w-auto px-8 py-4 text-base font-semibold leading-snug transition ease-in-out bg-white rounded-full h-14 duration-250 text-dark-900")},K=["onClick"],W=["innerHTML"],Z={key:1,tabindex:"-1","aria-hidden":"true",class:a("overflow-y-auto overflow-x-hidden bg-[color:var(--gris)] bg-opacity-50 fixed top-0 right-0 left-0 z-50 w-full h-modal md:h-full")},Y={class:a("flex items-center justify-center p-4 w-full h-screen")},q={class:a("bg-[color:var(--gris)] text-[color:var(--blanco)] rounded-lg shadow border border-[color:var(--blanco)]")},$={class:a("flex justify-between items-start p-4 rounded-t border-b border-[color:var(--blanco)]")},ee={"aria-hidden":"true",class:a("w-5 h-5"),fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},se={class:a("w-full p-3 overflow-y-auto"),style:{height:"500px","max-width":"700px"}},te=["src"],ae={key:1,class:a("grid grid-cols-2 md:grid-cols-3 gap-2")},oe={class:a("relative rounded-tr-3xl rounded-bl-3xl border-2 border-[color:var(--naranja)] bg-[color:var(--gris)] overflow-hidden")},ie=["src","alt","title"],re=["innerHTML"];function ne(t,e,m,i,r,h){var g,p,_,v;const u=H("stripe-buy-button");return r.storeDetails&&((p=(g=r.user.config)==null?void 0:g.config)!=null&&p.active_store)?(n(),l("div",R,[o("section",N,[o("div",C,[o("div",E,[o("h1",z,[o("span",{innerHTML:((v=(_=r.user.config)==null?void 0:_.theme)==null?void 0:v.title_store_h1)??"Pasa al siguiente nivel"},null,8,V)])])])]),r.storeDetails.products?(n(!0),l(x,{key:0},b(r.storeDetails.products,s=>(n(),l("section",{class:a("max-w-screen-xl px-4 py-12 mx-auto md:py-16 sm:px-6 lg:px-8"),key:s.id},[o("div",D,[o("div",O,[o("img",{src:s.image,title:s.name,alt:s.name,class:a("inset-y-0 z-40 h-full")},null,8,j)]),o("div",F,[o("div",B,[o("h5",G,[o("span",{innerHTML:s.name},null,8,A)]),s.short_description?(n(),l("p",{key:0,class:a("text-[color:var(--blanco)] text-xl"),innerHTML:s.short_description},null,8,X)):c("",!0)]),o("div",Q,[s.price_fiat>0&&s.price_fiat==5?(n(),d(u,{key:0,"buy-button-id":"buy_btn_1PAYYpHruUfPE2wuw5Mhazx8","publishable-key":"pk_live_51PAXsOHruUfPE2wuT1MTCc3LMcanaF77ZykWh93fUu8whnI6GLIFVfPcBSJVNTzGSiQtchKVsRu2kiziQlOD44XH006ERR5INg","customer-email":r.user.email},null,8,["customer-email"])):s.price_fiat>0&&s.price_fiat==10?(n(),d(u,{key:1,"buy-button-id":"buy_btn_1PAaDhHruUfPE2wuOkz0bx5C","publishable-key":"pk_live_51PAXsOHruUfPE2wuT1MTCc3LMcanaF77ZykWh93fUu8whnI6GLIFVfPcBSJVNTzGSiQtchKVsRu2kiziQlOD44XH006ERR5INg","customer-email":r.user.email},null,8,["customer-email"])):s.price_fiat>0&&s.price_fiat==20?(n(),d(u,{key:2,"buy-button-id":"buy_btn_1PAaEuHruUfPE2wu6DXK5KYT","publishable-key":"pk_live_51PAXsOHruUfPE2wuT1MTCc3LMcanaF77ZykWh93fUu8whnI6GLIFVfPcBSJVNTzGSiQtchKVsRu2kiziQlOD44XH006ERR5INg","customer-email":r.user.email},null,8,["customer-email"])):s.price_fiat>0&&s.price_fiat==40?(n(),d(u,{key:3,"buy-button-id":"buy_btn_1PAaI3HruUfPE2wu9m6H5vGp","publishable-key":"pk_live_51PAXsOHruUfPE2wuT1MTCc3LMcanaF77ZykWh93fUu8whnI6GLIFVfPcBSJVNTzGSiQtchKVsRu2kiziQlOD44XH006ERR5INg","customer-email":r.user.email},null,8,["customer-email"])):s.price_fiat>0&&s.price_fiat==80?(n(),d(u,{key:4,"buy-button-id":"buy_btn_1PAaHCHruUfPE2wua82AVGzY","publishable-key":"pk_live_51PAXsOHruUfPE2wuT1MTCc3LMcanaF77ZykWh93fUu8whnI6GLIFVfPcBSJVNTzGSiQtchKVsRu2kiziQlOD44XH006ERR5INg","customer-email":r.user.email},null,8,["customer-email"])):s.price_fiat>0&&s.price_fiat==160?(n(),d(u,{key:5,"buy-button-id":"buy_btn_1PAaJKHruUfPE2wuU9Jq0Nu9","publishable-key":"pk_live_51PAXsOHruUfPE2wuT1MTCc3LMcanaF77ZykWh93fUu8whnI6GLIFVfPcBSJVNTzGSiQtchKVsRu2kiziQlOD44XH006ERR5INg","customer-email":r.user.email},null,8,["customer-email"])):s.price_fiat>0?(n(),l("a",J," Próximamente ")):(n(),l("a",{key:7,onClick:le=>h.buyProduct(s.id,s.price_oro,s.price_plumas),class:a("w-full m-auto justify-center px-8 py-4 btn-madfenix text-[color:var(--gris)] font-semibold bg-[color:var(--naranja)] leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-[color:var(--naranja)] hover:bg-[color:var(--gris)] border-[color:var(--naranja)] border-2 cursor-pointer")},[e[2]||(e[2]=y(" Comprar por ")),o("span",{innerHTML:h.getPrice(s)},null,8,W)],8,K))])])])]))),128)):c("",!0),r.showProductsModal?(n(),l("div",Z,[o("div",Y,[o("div",q,[o("div",$,[e[5]||(e[5]=o("h3",{class:a("text-xl font-semibold")}," ¡Tus nuevos ítems! ",-1)),o("button",{type:"button",onClick:e[0]||(e[0]=s=>{r.showProductsModal=!1,r.imageItemsReveal=!1}),class:a("text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white")},[(n(),l("svg",ee,e[3]||(e[3]=[o("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]))),e[4]||(e[4]=o("span",{class:a("sr-only")},"Cerrar pantalla",-1))])]),o("div",se,[r.imageItemsReveal?c("",!0):(n(),l("video",{key:0,id:"video-storemadfenix",class:a("rounded rounded-3xl border border-2 border-[color:var(--gris)]"),playsinline:"",onEnded:e[1]||(e[1]=s=>h.revealImageItems())},[o("source",{src:r.videoNewItems,type:"video/mp4"},null,8,te),e[6]||(e[6]=y(" Tu navegador no soporta el video. "))],32)),r.imageItemsReveal&&r.itemsPurchaseToShow?(n(),l("div",ae,[(n(!0),l(x,null,b(r.itemsPurchaseToShow.nfts,s=>(n(),l("div",{key:s.id},[o("div",oe,[o("img",{src:s.image,style:{width:"100%"},alt:s.name,title:s.name},null,8,ie),o("div",{class:a("px-6 mt-3 mb-10 relative z-50 w-full text-center text-[color:var(--blanco)]"),innerHTML:s.name},null,8,re)])]))),128))])):c("",!0)])])])])):c("",!0)])):c("",!0)}const de=T(L,[["render",ne]]);export{de as _};
