import{_ as g}from"./D9FV153s.js";import{u as k,_ as j}from"./BzoBx1-M.js";import{u as L,a as T,b as M}from"./CMjI5qov.js";import{_ as A,u as H,e as _,c as n,a as s,g as m,b as p,w as b,F as d,r as c,o as r,d as v,f as z,v as C}from"./B_JPdZaX.js";import{u as P}from"./DjBNytbP.js";const S={middleware:"auth",data(){return{polls:k(),user:L(),settings:T(),serverMessage:M(),customAnswers:[],currentListAnswers:[],api:null,perfil:null}},mounted(){P({title:"Influye - Mad Fénix Games",meta:[{hid:"description",name:"description",content:"Influye en Mad Fénix Games."}]}),this.setUserCookies(),this.user.token&&this.polls.fetchPolls(),this.setBackground();const{$api:t}=H();this.api=t,this.getPerfil()},computed:{nftCollections(){let t=[];if(this.perfil&&this.perfil.nfts)for(let e=0;e<this.perfil.nfts.length;e++)t.some(i=>i.nft_id===this.perfil.nfts[e].nft_id)||t.push({nft_id:this.perfil.nfts[e].nft_id,name:this.perfil.nfts[e].nft.name,short_description:this.perfil.nfts[e].nft.short_description,portrait_image:this.perfil.nfts[e].nft.portrait_image,featured_image:this.perfil.nfts[e].nft.featured_image});if(this.perfil&&this.perfil.nfts_hedera)for(let e=0;e<this.perfil.nfts_hedera.length;e++)t.some(i=>i.nft_id===this.perfil.nfts_hedera[e].nft_id)||t.push({nft_id:this.perfil.nfts_hedera[e].nft_id,name:this.perfil.nfts_hedera[e].nft.name,short_description:this.perfil.nfts_hedera[e].nft.short_description,portrait_image:this.perfil.nfts_hedera[e].nft.portrait_image,featured_image:this.perfil.nfts_hedera[e].nft.featured_image});return t}},methods:{setBackground(){document.getElementById("container-global").style.background="transparent url('/img/perfil/back_temp.jpg') no-repeat top center"},afterPerfil(t){this.perfil=t},getPerfil(){this.api("/api/profile/getUserProfile",{method:"POST"}).then(t=>this.afterPerfil(t)).catch(()=>this.logout())},countNFTsByid(t){let e=0;if(this.perfil&&this.perfil.nfts)for(let i=0;i<this.perfil.nfts.length;i++)this.perfil.nfts[i].nft_id==t&&(e+=1);if(this.perfil&&this.perfil.nfts_hedera)for(let i=0;i<this.perfil.nfts_hedera.length;i++)this.perfil.nfts_hedera[i].nft_id==t&&(e+=1);return e},vote(t,e){if(e&&!t.userAnswer&&t.active){let i=e;typeof e!="string"&&(i=e.description),this.api("/api/poll/answerPoll",{method:"POST",body:{poll_id:t.id,answer:i}}).then(y=>this.polls.fetchPolls()).catch(()=>this.logout())}},answerUser(t,e){let i="";return t.userAnswer&&e.description==t.userAnswer.answer&&(i=" - "+t.userAnswer.votes+"% tuyos"),i},setUserCookies(){let t=_.get("token");if(t){this.user.setToken(t);let e=_.get("user");if(e)this.user.updateUser(JSON.parse(e));else{console.log("test");try{this.user.fetchUser()}catch{}}}}}},U={key:0},B={class:"max-w-screen-xl px-4 pb-12 mx-auto md:pb-16 sm:px-6 lg:px-8"},N={class:"relative z-30 grid grid-cols-1 sm:grid-cols-12 items-center justify-center mx-auto text-center px-4 sm:px-16 lg:flex-row lg:text-left"},F={class:"sm:col-span-3 flex items-center py-6 sm:py-0 px-12 h-full text-2xl font-bold sm:text-4xl rounded-tr-3xl sm:rounded-tr-none rounded-tl-3xl sm:rounded-bl-3xl bg-madfenix-gris"},V={class:"font-extrabold tracking-tight text-white text-size-token-number text-center w-full"},I=["innerHTML"],O={key:1},D=["innerHTML"],E={class:"sm:col-span-7 px-3 sm:px-0 py-3 sm:py-0 flex items-center space-x-3 justify-center h-full bg-madfenix-azul sm:rounded-tr-3xl rounded-bl-3xl sm:rounded-bl-none rounded-br-3xl sm:mr-12 lg:justify-end"},R={class:"botones-tokens"},G={key:0,class:"w-full"},J={class:"relative rounded-tl-3xl rounded-br-3xl min-h-[150px] mx-3 mt-4 sm:mx-auto sm:w-2/3 bg-madfenix-gris border border-madfenix-naranja overflow-hidden"},q=["src"],K={class:"relative sm:mx-auto sm:w-1/2 z-50 contenedor-botones-formularios"},Q={class:"flex justify-center"},W={class:"contenedor-boton-right-formularios"},X={class:"relative rounded-tl-3xl rounded-br-3xl min-h-[500px] mx-3 mt-12 sm:mx-auto sm:w-2/3 bg-madfenix-gris border border-madfenix-naranja overflow-hidden"},Y=["src"],Z={key:0,class:"overflow-y-auto h-[430px] mt-3"},$=["innerHTML"],ee=["innerHTML"],te={class:"relative sm:mx-auto sm:w-1/2 z-50 contenedor-botones-formularios"},se={class:"flex space-x-3 justify-center"},ne=["onClick","innerHTML"],re=["onClick"],ie=["onClick"],ae=["onClick"];function oe(t,e,i,y,o,f){const h=g,w=g;return o.user.user&&o.perfil?(r(),n("div",U,[e[7]||(e[7]=s("h1",{class:"text-madfenix-naranja w-full text-center py-12"},"Influye",-1)),s("section",B,[s("div",N,[s("div",F,[s("h5",V,[o.perfil?(r(),n("span",{key:0,innerHTML:o.perfil.plumas},null,8,I)):(r(),n("span",O,"...")),o.perfil&&o.perfil.plumas_hedera?(r(),n("p",{key:2,innerHTML:o.perfil.plumas_hedera+" RED",class:"mt-4 text-xl"},null,8,D)):m("",!0)])]),e[5]||(e[5]=s("div",{class:"sm:col-span-2 flex items-center justify-center bg-madfenix-azul"},[s("img",{src:j,alt:"Plumas",class:"absolute z-50 h-1/2 sm:h-full"}),s("svg",{class:"inset-y-0 z-40 h-full text-madfenix-gris",preserveAspectRatio:"none",viewBox:"0 0 100 100",fill:"currentcolor"},[s("polygon",{points:"0,0 100,0 0,100"})])],-1)),s("div",E,[e[4]||(e[4]=s("h5",{class:"grow font-extrabold tracking-tight text-white text-size-token"}," Plumas ",-1)),s("div",R,[p(h,{to:"/canjear-cupon",class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer"},{default:b(()=>e[1]||(e[1]=[v(" Canjea un cupón ")])),_:1}),e[3]||(e[3]=s("br",null,null,-1)),p(h,{to:"/transfiere-plumas-a-hedera-previo1",class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer"},{default:b(()=>e[2]||(e[2]=[v(" Transfiere Plumas ")])),_:1})])])])]),f.nftCollections?(r(!0),n(d,{key:0},c(f.nftCollections,a=>(r(),n(d,{key:a.nft_id},[a.name=="Dragones Custodio"?(r(),n("div",G,[s("div",J,[s("img",{src:a.featured_image,class:"absolute",style:{"min-width":"1100px",top:"50%",left:"50%",transform:"translate(-50%, -40%)"}},null,8,q),e[6]||(e[6]=s("div",{class:"relative min-h-[150px] mb-0 p-6 z-50"},"   ",-1))]),s("div",K,[s("div",Q,[s("div",W,[p(w,{to:"/coleccion/?nft_id="+a.nft_id,class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer",innerHTML:a.name+" ("+f.countNFTsByid(a.nft_id)+")"},null,8,["to","innerHTML"])])])])])):m("",!0)],64))),128)):m("",!0),this.polls.polls?(r(!0),n(d,{key:1},c(this.polls.polls,(a,u)=>(r(),n("div",{class:"w-full",key:a.id},[s("div",X,[s("img",{src:a.featured_image,class:"absolute",style:{"min-width":"1100px",top:"50%",left:"50%",transform:"translate(-50%, -40%)"}},null,8,Y),o.currentListAnswers[u]?(r(),n("div",Z,[(r(!0),n(d,null,c(o.currentListAnswers[u],(l,x)=>(r(),n("div",{class:"relative w-full text-center mb-0 p-2 z-50 text-madfenix-blanco",key:x,innerHTML:"@"+l.username+": "+l.answer},null,8,$))),128))])):(r(),n("div",{key:1,class:"relative min-h-[500px] mb-0 p-6 z-50 text-madfenix-blanco",innerHTML:a.description},null,8,ee))]),s("div",te,[s("div",se,[a.answers&&a.answers!=""?(r(!0),n(d,{key:0},c(a.answers,(l,x)=>(r(),n("div",{key:x,class:"text-center"},[s("a",{onClick:le=>f.vote(a,l),class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer",innerHTML:l.description+"<br>("+l.votes+"%"+f.answerUser(a,l)+")"},null,8,ne)]))),128)):(r(),n(d,{key:1},[a.userAnswer?(r(),n(d,{key:0},[o.currentListAnswers[u]?(r(),n("a",{key:1,onClick:l=>o.currentListAnswers[u]=null,class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer",innerHTML:"Ocultar respuesta"},null,8,ie)):(r(),n("a",{key:0,onClick:l=>o.currentListAnswers[u]=a.customAnswers,class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer",innerHTML:"Listar respuesta"},null,8,re))],64)):(r(),n(d,{key:1},[z(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=l=>o.customAnswers[t.index]=l),class:"w-full text-madfenix-blanco text-center text-3xl rounded-tl-3xl rounded-br-3xl bg-madfenix-gris py-4 pl-10 pr-3 border-2 border-madfenix-gris focus:border-madfenix-naranja",placeholder:"Respuesta"},null,512),[[C,o.customAnswers[t.index]]]),s("a",{onClick:l=>f.vote(a,o.customAnswers[t.index]),class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer",innerHTML:"Votar"},null,8,ae)],64))],64))])])]))),128)):m("",!0),e[8]||(e[8]=s("div",null," ",-1))])):m("",!0)}const xe=A(S,[["render",oe]]);export{xe as default};
