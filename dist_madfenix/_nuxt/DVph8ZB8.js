import{_ as y}from"./Bl6ACM7x.js";import{u as k,_ as T}from"./C7L0yf0J.js";import{u as M,a as S,b as L}from"./CyDzS8n7.js";import{p,_ as H,u as z,e as g,c as r,a as t,d as a,b as f,w as u,g as c,F as b,r as _,o as i}from"./DM42cli1.js";import{u as C}from"./DjXUEXKX.js";const P=p("/img/perfil/tiefling_bard.png"),v=p("/img/perfil/twitch_account.svg"),F=p("/img/perfil/logout.svg"),N=p("/img/perfil/oro.png"),A=p("/img/perfil/adivinacion.png"),B={middleware:"auth",data(){return{polls:k(),user:M(),settings:S(),serverMessage:L(),categorySelected:null,subcategorySelected:null,api:null,perfil:null}},mounted(){C({title:"Perfil - Mad Fénix Games",meta:[{hid:"description",name:"description",content:"Perfil en Mad Fénix Games."}]}),this.setUserCookies(),this.user.token&&this.polls.fetchPolls(),this.setBackground();const{$api:n}=z();this.api=n,this.getPerfil()},computed:{nftCollections(){let n=[],e=!1,l=!0;if(this.perfil&&this.perfil.nfts)for(let o=0;o<this.perfil.nfts.length;o++)e=!1,this.categorySelected&&this.perfil.nfts[o].nft.category==this.categorySelected.name&&(e=!0),l=!0,this.subcategorySelected&&(l=!1,this.perfil.nfts[o].nft.subcategory==this.subcategorySelected&&(l=!0)),!n.some(s=>s.nft_id===this.perfil.nfts[o].nft_id)&&e&&l&&n.push({nft_id:this.perfil.nfts[o].nft_id,name:this.perfil.nfts[o].nft.name,short_description:this.perfil.nfts[o].nft.short_description,portrait_image:this.perfil.nfts[o].nft.portrait_image,featured_image:this.perfil.nfts[o].nft.featured_image});if(this.perfil&&this.perfil.nfts_hedera)for(let o=0;o<this.perfil.nfts_hedera.length;o++)e=!1,this.categorySelected&&this.perfil.nfts_hedera[o].nft.category==this.categorySelected.name&&(e=!0),l=!0,this.subcategorySelected&&(l=!1,this.perfil.nfts_hedera[o].nft.subcategory==this.subcategorySelected&&(l=!0)),!n.some(s=>s.nft_id===this.perfil.nfts_hedera[o].nft_id)&&e&&l&&n.push({nft_id:this.perfil.nfts_hedera[o].nft_id,name:this.perfil.nfts_hedera[o].nft.name,short_description:this.perfil.nfts_hedera[o].nft.short_description,portrait_image:this.perfil.nfts_hedera[o].nft.portrait_image,featured_image:this.perfil.nfts_hedera[o].nft.featured_image});return n},pollsNotAnswered(){let n=0;if(this.polls.polls)for(let e=0;e<this.polls.polls.length;e++)this.polls.polls[e].userAnswer||n++;return n}},methods:{setBackground(){document.getElementById("container-global").style.background="transparent url('/img/perfil/back_temp.jpg') no-repeat top center"},afterLogout(){g.remove("token"),g.remove("user"),this.user.setToken(""),this.user.setUserToNull(),this.user.removeUser(),setTimeout(()=>this.$router.push({path:"/login"}),2e3)},logout(){this.api("/api/logout",{method:"POST"}).then(()=>this.afterLogout()).catch(()=>this.afterLogout())},afterPerfil(n){this.perfil=n},getPerfil(){this.api("/api/profile/getUserProfile",{method:"POST"}).then(n=>this.afterPerfil(n)).catch(()=>this.logout())},desconectarTwitch(){confirm("¿Estás seguro que quieres desconectar tu cuenta de Twitch?")&&this.api("/api/twitch/disconnectTwitch",{method:"POST"}).then(e=>this.getPerfil()).catch(e=>e.message?e.message==="The given data was invalid."?this.serverMessage.setServerMessage("Datos inválidos."):this.serverMessage.setServerMessage(e.message):this.serverMessage.setServerMessage("Error."))},desconectarSteam(){this.api("/api/steam/disconnectSteam",{method:"POST"}).then(n=>this.getPerfil()).catch(n=>n.message?n.message==="The given data was invalid."?this.serverMessage.setServerMessage("Datos inválidos."):this.serverMessage.setServerMessage(n.message):this.serverMessage.setServerMessage("Error."))},conectarSteam(){},countNFTsByid(n){let e=0;if(this.perfil&&this.perfil.nfts)for(let l=0;l<this.perfil.nfts.length;l++)this.perfil.nfts[l].nft_id==n&&(e+=1);if(this.perfil&&this.perfil.nfts_hedera)for(let l=0;l<this.perfil.nfts_hedera.length;l++)this.perfil.nfts_hedera[l].nft_id==n&&(e+=1);return e},setUserCookies(){let n=g.get("token");if(n){this.user.setToken(n);let e=g.get("user");if(e)this.user.updateUser(JSON.parse(e));else{console.log("test");try{this.user.fetchUser()}catch{}}}}}},D={key:0},U={class:"md:grid md:grid-cols-3 md:items-center border-y-2 border-madfenix-naranja bg-madfenix-gris"},E={class:"text-right col-span-1 px-6"},O=["innerHTML"],V=["innerHTML"],R={class:"flex space-x-3 justify-end my-3"},I={key:0,class:"flex items-center space-x-3 text-white text-center"},q=["innerHTML"],G={key:1},J=["href"],K={class:"col-span-1 px-6"},Q={key:0,class:"my-4 w-full text-white text-center text-sm lg:text-xl"},W=["innerHTML"],X={key:1,class:"my-4"},Y={key:2,class:"my-4"},Z={key:3,class:"my-4 w-full text-white text-center text-sm lg:text-xl"},$=["innerHTML"],ee={key:4,class:"my-4"},te={key:5,class:"my-4 w-full text-white text-center text-sm lg:text-xl"},se=["innerHTML"],ne={key:6,class:"my-4"},re={key:7,class:"my-4 w-full text-white text-center hidden text-sm lg:text-xl"},ie=["innerHTML"],oe={key:8,class:"my-4 hidden text-sm lg:text-xl"},le={class:"my-4"},ae={class:"max-w-screen-xl px-4 py-7 pt-12 mx-auto md:py-7 md:pt-16 sm:px-6 lg:px-8"},de={class:"relative z-30 grid grid-cols-1 sm:grid-cols-12 items-center justify-center mx-auto text-center px-4 sm:px-16 lg:flex-row lg:text-left"},fe={class:"sm:col-span-3 flex items-center py-6 sm:py-0 px-12 h-full text-2xl font-bold sm:text-4xl rounded-tr-3xl sm:rounded-tr-none rounded-tl-3xl sm:rounded-bl-3xl bg-madfenix-gris"},me={class:"font-extrabold tracking-tight text-white text-size-token-number text-center w-full"},ue=["innerHTML"],xe={key:1},ce=["innerHTML"],pe={class:"sm:col-span-7 px-3 sm:px-0 py-3 sm:py-0 flex space-x-3 items-center justify-center h-full bg-madfenix-azul sm:rounded-tr-3xl rounded-bl-3xl sm:rounded-bl-none rounded-br-3xl sm:mr-12 lg:justify-end"},ge={class:"botones-tokens"},he={class:"max-w-screen-xl px-4 py-7 mx-auto md:py-7 sm:px-6 lg:px-8"},be={class:"relative z-30 grid grid-cols-1 sm:grid-cols-12 items-center justify-center mx-auto text-center px-4 sm:px-16 lg:flex-row lg:text-left"},_e={class:"sm:col-span-3 flex items-center py-6 sm:py-0 px-12 h-full text-2xl font-bold sm:text-4xl rounded-tr-3xl sm:rounded-tr-none rounded-tl-3xl sm:rounded-bl-3xl bg-madfenix-gris"},ye={class:"font-extrabold tracking-tight text-white text-size-token-number text-center w-full"},ve=["innerHTML"],we={key:1},je=["innerHTML"],ke={class:"sm:col-span-7 px-3 sm:px-0 py-3 sm:py-0 flex items-center space-x-3 justify-center h-full bg-madfenix-azul sm:rounded-tr-3xl rounded-bl-3xl sm:rounded-bl-none rounded-br-3xl sm:mr-12 lg:justify-end"},Te={class:"botones-tokens"},Me={class:"max-w-screen-xl px-4 py-7 pb-12 mx-auto md:py-7 md:pb-16 sm:px-6 lg:px-8"},Se={class:"relative z-30 grid grid-cols-1 sm:grid-cols-12 items-center justify-center mx-auto text-center px-4 sm:px-16 lg:flex-row lg:text-left"},Le={class:"sm:col-span-3 flex items-center py-6 sm:py-0 px-12 h-full text-2xl font-bold sm:text-4xl rounded-tr-3xl sm:rounded-tr-none rounded-tl-3xl sm:rounded-bl-3xl bg-madfenix-gris"},He={class:"font-extrabold tracking-tight text-white text-size-token-number text-center w-full"},ze=["innerHTML"],Ce={class:"sm:col-span-7 px-3 sm:px-0 py-3 sm:py-0 flex items-center space-x-3 justify-center h-full bg-madfenix-azul sm:rounded-tr-3xl rounded-bl-3xl sm:rounded-bl-none rounded-br-3xl sm:mr-12 lg:justify-end"},Pe={class:"botones-tokens"},Fe={key:0,class:"flex flex-wrap justify-center space-x-3 max-w-screen-xl mx-auto sm:w-3/4"},Ne=["onClick"],Ae=["innerHTML"],Be={key:1,class:"flex flex-wrap justify-center space-x-3 max-w-screen-xl mx-auto sm:w-3/4"},De=["onClick"],Ue=["innerHTML"],Ee={class:"relative rounded-tl-3xl rounded-br-3xl min-h-[300px] mx-3 mt-12 sm:mx-auto sm:w-2/3 bg-madfenix-gris border border-madfenix-naranja overflow-hidden"},Oe=["src"],Ve={class:"relative sm:mx-auto sm:w-1/2 z-50 contenedor-botones-formularios"},Re={class:"flex justify-center"},Ie={class:"contenedor-boton-right-formularios"};function qe(n,e,l,o,s,x){const m=y,w=y;return s.user.user&&s.perfil?(i(),r("div",D,[t("div",U,[e[20]||(e[20]=t("div",{class:"col-span-1 h-full"},[t("img",{src:P,alt:"Avatar perfil Mad Fénix",title:"Avatar perfil Mad Fénix",class:"h-full"})],-1)),t("div",E,[t("div",{innerHTML:"@"+s.user.user.name,class:"text-sm lg:text-xl font-black text-madfenix-naranja my-3"},null,8,O),t("div",{innerHTML:s.user.user.email,class:"text-sm lg:text-xl text-white my-3"},null,8,V),t("div",R,[s.perfil&&s.perfil.user_twitch?(i(),r("div",I,[t("a",{onClick:e[0]||(e[0]=d=>x.desconectarTwitch()),class:"cursor-pointer"},e[4]||(e[4]=[t("img",{src:v,alt:"Desconectar Twitch",title:"Desconectar Twitch",class:"w-[50px] lg:w-[70px]"},null,-1)])),t("span",{innerHTML:s.perfil.user_twitch},null,8,q)])):(i(),r("div",G,[t("a",{href:"https://id.twitch.tv/oauth2/authorize?response_type=code&client_id=2wbjjwkzyy9t68a8ex5b4fsz7kfc37&redirect_uri=https%3A%2F%2Fapi.madfenix.com%2Fapi%2Ftwitch%2FconnectAccount&scope=user%3Aread%3Aemail&state=user"+s.user.user.id,class:"cursor-pointer"},e[5]||(e[5]=[t("img",{src:v,alt:"Conectar Twitch",title:"Conectar Twitch",class:"w-[50px] lg:w-[70px]"},null,-1)]),8,J)])),t("div",null,[t("a",{onClick:e[1]||(e[1]=d=>x.logout()),class:"cursor-pointer"},e[6]||(e[6]=[t("img",{src:F,alt:"Logout",title:"Logout",class:"w-[50px] lg:w-[70px]"},null,-1)]))])])]),t("div",K,[s.perfil&&s.perfil.hedera_wallet?(i(),r("div",Q,[e[7]||(e[7]=a(" Tu cartera de hedera vinculada: ")),t("span",{innerHTML:s.perfil.hedera_wallet},null,8,W),e[8]||(e[8]=a(".  "))])):s.perfil&&s.perfil.hedera_wallet_check?(i(),r("div",X,[f(m,{to:"/vincular-wallet-hedera-2",class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer"},{default:u(()=>e[9]||(e[9]=[a(" Vincular hedera ")])),_:1})])):(i(),r("div",Y,[f(m,{to:"/vincular-wallet-hedera",class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer"},{default:u(()=>e[10]||(e[10]=[a(" Vincular hedera ")])),_:1})])),s.perfil&&s.perfil.referred_code_from?(i(),r("div",Z,[e[11]||(e[11]=a(" Tu referido: ")),t("span",{innerHTML:s.perfil.referred_code_from},null,8,$),e[12]||(e[12]=a(".  "))])):(i(),r("div",ee,[f(m,{to:"/vincular-codigo-referido",class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer"},{default:u(()=>e[13]||(e[13]=[a(" Vincular código de referido ")])),_:1})])),s.perfil&&s.perfil.referred_code?(i(),r("div",te,[e[14]||(e[14]=a(" Tu código de referido: ")),t("span",{innerHTML:s.perfil.referred_code},null,8,se),e[15]||(e[15]=a(".  "))])):(i(),r("div",ne,[f(m,{to:"/crear-codigo-referido",class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer"},{default:u(()=>e[16]||(e[16]=[a(" Crear código de referido ")])),_:1})])),s.perfil&&s.perfil.user_steam?(i(),r("div",re,[e[17]||(e[17]=a(" Conectad@ con ")),t("span",{innerHTML:s.perfil.user_steam},null,8,ie),e[18]||(e[18]=a(".  ")),t("a",{onClick:e[2]||(e[2]=d=>x.desconectarSteam()),class:"text-white underline font-semibold hover:no-underline"}," Desconectar Steam ")])):(i(),r("div",oe,[t("a",{onClick:e[3]||(e[3]=d=>x.conectarSteam()),class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer"}," Conectar Steam ")])),t("div",le,[f(m,{to:"/eliminar-cuenta",class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer"},{default:u(()=>e[19]||(e[19]=[a(" Eliminar cuenta ")])),_:1})])])]),t("section",ae,[t("div",de,[t("div",fe,[t("h5",me,[s.perfil?(i(),r("span",{key:0,innerHTML:s.perfil.oro},null,8,ue)):(i(),r("span",xe,"...")),s.perfil&&s.perfil.oro_hedera?(i(),r("p",{key:2,innerHTML:s.perfil.oro_hedera+" RED",class:"mt-4 text-xl"},null,8,ce)):c("",!0)])]),e[25]||(e[25]=t("div",{class:"sm:col-span-2 flex items-center justify-center bg-madfenix-azul"},[t("img",{src:N,alt:"Oro",class:"absolute z-50 h-1/2 sm:h-full"}),t("svg",{class:"inset-y-0 z-40 h-full text-madfenix-gris",preserveAspectRatio:"none",viewBox:"0 0 100 100",fill:"currentcolor"},[t("polygon",{points:"0,0 100,0 0,100"})])],-1)),t("div",pe,[e[24]||(e[24]=t("h5",{class:"grow font-extrabold tracking-tight text-white text-size-token"}," Oros ",-1)),t("div",ge,[f(m,{to:"/canjear-cupon-oro",class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer"},{default:u(()=>e[21]||(e[21]=[a(" Canjea un cupón ")])),_:1}),e[23]||(e[23]=t("br",null,null,-1)),f(m,{to:"/transfiere-oro-a-hedera-previo1",class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer"},{default:u(()=>e[22]||(e[22]=[a(" Transfiere Oro ")])),_:1})])])])]),t("section",he,[t("div",be,[t("div",_e,[t("h5",ye,[s.perfil?(i(),r("span",{key:0,innerHTML:s.perfil.plumas},null,8,ve)):(i(),r("span",we,"...")),s.perfil&&s.perfil.plumas_hedera?(i(),r("p",{key:2,innerHTML:s.perfil.plumas_hedera+" RED",class:"mt-4 text-xl"},null,8,je)):c("",!0)])]),e[30]||(e[30]=t("div",{class:"sm:col-span-2 flex items-center justify-center bg-madfenix-azul"},[t("img",{src:T,alt:"Plumas",class:"absolute z-50 h-1/2 sm:h-full"}),t("svg",{class:"inset-y-0 z-40 h-full text-madfenix-gris",preserveAspectRatio:"none",viewBox:"0 0 100 100",fill:"currentcolor"},[t("polygon",{points:"0,0 100,0 0,100"})])],-1)),t("div",ke,[e[29]||(e[29]=t("h5",{class:"grow font-extrabold tracking-tight text-white text-size-token"}," Plumas ",-1)),t("div",Te,[f(m,{to:"/canjear-cupon",class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer"},{default:u(()=>e[26]||(e[26]=[a(" Canjea un cupón ")])),_:1}),e[28]||(e[28]=t("br",null,null,-1)),f(m,{to:"/transfiere-plumas-a-hedera-previo1",class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer"},{default:u(()=>e[27]||(e[27]=[a(" Transfiere Plumas ")])),_:1})])])])]),t("section",Me,[t("div",Se,[t("div",Le,[t("h5",He,[t("span",{innerHTML:x.pollsNotAnswered},null,8,ze)])]),e[33]||(e[33]=t("div",{class:"sm:col-span-2 flex items-center justify-center bg-madfenix-azul"},[t("img",{src:A,alt:"Influye",class:"absolute z-50 h-1/2 sm:h-full"}),t("svg",{class:"inset-y-0 z-40 h-full text-madfenix-gris",preserveAspectRatio:"none",viewBox:"0 0 100 100",fill:"currentcolor"},[t("polygon",{points:"0,0 100,0 0,100"})])],-1)),t("div",Ce,[e[32]||(e[32]=t("h5",{class:"grow font-extrabold tracking-tight text-white text-size-token"}," Destino ",-1)),t("div",Pe,[f(m,{to:"/influye",class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer"},{default:u(()=>e[31]||(e[31]=[a(" Influye en Névoran ")])),_:1})])])])]),s.perfil&&s.perfil.nft_categories?(i(),r("div",Fe,[(i(!0),r(b,null,_(s.perfil.nft_categories,(d,h)=>(i(),r("div",{class:"py-2 md:py-2",key:h},[t("a",{onClick:j=>{s.categorySelected=d,s.subcategorySelected=null},class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer"},[t("span",{innerHTML:d.name},null,8,Ae)],8,Ne)]))),128))])):c("",!0),s.perfil&&s.categorySelected?(i(),r("div",Be,[(i(!0),r(b,null,_(s.categorySelected.subcategories,(d,h)=>(i(),r("div",{class:"py-2 md:py-2",key:h},[t("a",{onClick:j=>s.subcategorySelected=d,class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer"},[t("span",{innerHTML:d},null,8,Ue)],8,De)]))),128))])):c("",!0),x.nftCollections?(i(!0),r(b,{key:2},_(x.nftCollections,d=>(i(),r("div",{class:"w-full",key:d.nft_id},[t("div",Ee,[t("img",{src:d.featured_image,class:"absolute",style:{"min-width":"1100px",top:"50%",left:"50%",transform:"translate(-50%, -40%)"}},null,8,Oe),e[34]||(e[34]=t("div",{class:"relative min-h-[300px] mb-0 p-6 z-50"},"   ",-1))]),t("div",Ve,[t("div",Re,[t("div",Ie,[f(w,{to:"/coleccion/?nft_id="+d.nft_id,class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer",innerHTML:d.name+" ("+x.countNFTsByid(d.nft_id)+")"},null,8,["to","innerHTML"])])])])]))),128)):c("",!0),e[35]||(e[35]=t("div",{class:"p-4"},"   ",-1))])):c("",!0)}const Xe=H(B,[["render",qe]]);export{Xe as default};
