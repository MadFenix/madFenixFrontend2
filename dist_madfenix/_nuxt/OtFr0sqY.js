import{u as p,a as f,b as x}from"./CyDzS8n7.js";import{_ as g,u as _,e as c,l as b,c as l,a as i,F as y,r as k,g as d,o as r,m as u,d as v}from"./DM42cli1.js";import{u as P}from"./DjXUEXKX.js";const T={middleware:"auth",data(){return{user:p(),settings:f(),serverMessage:x(),api:null,storeDetails:null}},mounted(){P({title:"Tienda - Mad Fénix",meta:[{hid:"description",name:"description",content:"Tienda en Mad Fénix."}],script:[{async:!0,src:"https://js.stripe.com/v3/buy-button.js"}]}),this.setUserCookies(),this.setBackground();const{$api:t}=_();this.api=t,this.getStoreDetails()},computed:{},methods:{setBackground(){document.getElementById("container-global").style.background="transparent url('/img/perfil/back_temp.jpg') no-repeat top center"},afterLogout(){c.remove("token"),c.remove("user"),this.user.setToken(""),this.user.setUserToNull(),this.user.removeUser(),setTimeout(()=>this.$router.push({path:"/login"}),2e3)},logout(){this.api("/api/logout",{method:"POST"}).then(()=>this.afterLogout()).catch(()=>this.afterLogout())},afterStoreDetails(t){this.storeDetails=t},getStoreDetails(){this.api("/api/store/details",{method:"GET"}).then(t=>this.afterStoreDetails(t)).catch(()=>this.logout())},validateProduct(t){this.api("/api/store/validateProductOrder",{method:"POST",body:{product_order_id:t.id}}).then(()=>this.$router.push({path:"/perfil"})).catch(s=>s.message?s.message==="The given data was invalid."?this.serverMessage.setServerMessage("Datos inválidos."):this.serverMessage.setServerMessage(s.message):this.serverMessage.setServerMessage("Error."))},buyProduct(t,s,m){this.api("/api/store/addProductToOrder",{method:"POST",body:{product_id:t}}).then(n=>{(s>0||m>0)&&this.validateProduct(n)}).catch(n=>n.message?n.message==="The given data was invalid."?this.serverMessage.setServerMessage("Datos inválidos."):this.serverMessage.setServerMessage(n.message):this.serverMessage.setServerMessage("Error."))},getPrice(t){return t.price_oro>0?'<span class="text-size-token-store">'+t.price_oro+"</span> oros":'<span class="text-size-token-store">'+t.price_plumas+"</span> plumas"},setUserCookies(){let t=c.get("token");if(t){this.user.setToken(t);let s=c.get("user");if(s)this.user.updateUser(JSON.parse(s));else{console.log("test");try{this.user.fetchUser()}catch{}}}}}},M={key:0},w={class:"relative z-30 grid grid-cols-1 sm:grid-cols-12 items-center justify-center mx-auto text-center px-4 sm:px-16 lg:flex-row lg:text-left"},S={class:"sm:col-span-3 flex items-center py-6 sm:py-0 px-12 h-full text-2xl rounded-tl-3xl rounded-tr-3xl sm:rounded-tr-none bg-madfenix-gris border border-madfenix-naranja sm:border-r-0 font-bold sm:text-4xl"},H=["src","title","alt"],U={class:"sm:col-span-9 px-3 sm:px-0 py-3 sm:py-0 sm:flex sm:items-center space-x-3 justify-center h-full rounded-br-3xl rounded-bl-3xl sm:rounded-bl-none bg-madfenix-gris border border-madfenix-naranja sm:border-l-0 sm:mr-12 lg:justify-end"},E={class:"grow font-extrabold tracking-tight"},L={class:"font-extrabold tracking-tight text-madfenix-naranja text-4xl sm:text-5xl"},V=["innerHTML"],I=["innerHTML"],z={class:"botones-tokens"},D={key:6,class:"flex cursor-pointer items-center justify-center w-auto px-8 py-4 text-base font-semibold leading-snug transition ease-in-out bg-white rounded-full h-14 duration-250 text-dark-900"},N=["onClick"],O=["innerHTML"];function R(t,s,m,n,a,h){const o=b("stripe-buy-button");return a.storeDetails?(r(),l("div",M,[s[1]||(s[1]=i("section",{class:"px-4 py-12 md:py-16 sm:px-6 lg:px-8"},[i("div",{class:"max-w-screen-xl mx-auto"},[i("div",{class:"w-full max-w-3xl mx-auto text-center lg:max-w-5xl"},[i("h1",{class:"mt-4 text-4xl font-extrabold text-madfenix-naranja md:mt-5 sm:text-5xl md:text-6xl",innerHTML:"Pasa al siguiente nivel"})])])],-1)),a.storeDetails.products?(r(!0),l(y,{key:0},k(a.storeDetails.products,e=>(r(),l("section",{class:"max-w-screen-xl px-4 py-12 mx-auto md:py-16 sm:px-6 lg:px-8",key:e.id},[i("div",w,[i("div",S,[i("img",{src:e.image,title:e.name,alt:e.name,class:"inset-y-0 z-40 h-full"},null,8,H)]),i("div",U,[i("div",E,[i("h5",L,[i("span",{innerHTML:e.name},null,8,V)]),e.short_description?(r(),l("p",{key:0,class:"text-madfenix-blanco text-xl",innerHTML:e.short_description},null,8,I)):d("",!0)]),i("div",z,[e.price_fiat>0&&e.price_fiat==5?(r(),u(o,{key:0,"buy-button-id":"buy_btn_1PAYYpHruUfPE2wuw5Mhazx8","publishable-key":"pk_live_51PAXsOHruUfPE2wuT1MTCc3LMcanaF77ZykWh93fUu8whnI6GLIFVfPcBSJVNTzGSiQtchKVsRu2kiziQlOD44XH006ERR5INg","customer-email":a.user.email},null,8,["customer-email"])):e.price_fiat>0&&e.price_fiat==10?(r(),u(o,{key:1,"buy-button-id":"buy_btn_1PAaDhHruUfPE2wuOkz0bx5C","publishable-key":"pk_live_51PAXsOHruUfPE2wuT1MTCc3LMcanaF77ZykWh93fUu8whnI6GLIFVfPcBSJVNTzGSiQtchKVsRu2kiziQlOD44XH006ERR5INg","customer-email":a.user.email},null,8,["customer-email"])):e.price_fiat>0&&e.price_fiat==20?(r(),u(o,{key:2,"buy-button-id":"buy_btn_1PAaEuHruUfPE2wu6DXK5KYT","publishable-key":"pk_live_51PAXsOHruUfPE2wuT1MTCc3LMcanaF77ZykWh93fUu8whnI6GLIFVfPcBSJVNTzGSiQtchKVsRu2kiziQlOD44XH006ERR5INg","customer-email":a.user.email},null,8,["customer-email"])):e.price_fiat>0&&e.price_fiat==40?(r(),u(o,{key:3,"buy-button-id":"buy_btn_1PAaI3HruUfPE2wu9m6H5vGp","publishable-key":"pk_live_51PAXsOHruUfPE2wuT1MTCc3LMcanaF77ZykWh93fUu8whnI6GLIFVfPcBSJVNTzGSiQtchKVsRu2kiziQlOD44XH006ERR5INg","customer-email":a.user.email},null,8,["customer-email"])):e.price_fiat>0&&e.price_fiat==80?(r(),u(o,{key:4,"buy-button-id":"buy_btn_1PAaHCHruUfPE2wua82AVGzY","publishable-key":"pk_live_51PAXsOHruUfPE2wuT1MTCc3LMcanaF77ZykWh93fUu8whnI6GLIFVfPcBSJVNTzGSiQtchKVsRu2kiziQlOD44XH006ERR5INg","customer-email":a.user.email},null,8,["customer-email"])):e.price_fiat>0&&e.price_fiat==160?(r(),u(o,{key:5,"buy-button-id":"buy_btn_1PAaJKHruUfPE2wuU9Jq0Nu9","publishable-key":"pk_live_51PAXsOHruUfPE2wuT1MTCc3LMcanaF77ZykWh93fUu8whnI6GLIFVfPcBSJVNTzGSiQtchKVsRu2kiziQlOD44XH006ERR5INg","customer-email":a.user.email},null,8,["customer-email"])):e.price_fiat>0?(r(),l("a",D," Próximamente ")):(r(),l("a",{key:7,onClick:F=>h.buyProduct(e.id,e.price_oro,e.price_plumas),class:"w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer"},[s[0]||(s[0]=v(" Comprar por ")),i("span",{innerHTML:h.getPrice(e)},null,8,O)],8,N))])])])]))),128)):d("",!0)])):d("",!0)}const A=g(T,[["render",R]]);export{A as default};
