import{u as l,a as d,b as p}from"./B5Um8tl_.js";import{p as m,_ as h,u as f,e as a,c as i,a as s,F as g,r as x,g as c,o}from"./C_WMv-1D.js";import{u as v}from"./9CNp0RpY.js";const _=m("/img/streams/notificationSong.ogg"),k=m("/img/streams/fenix_feliz.png"),w={middleware:"auth",data(){return{user:l(),settings:d(),serverMessage:p(),api:null,items:null,itemsInterval:null,itemsIntervalRemove:null}},computed:{},mounted(){v({title:"Notificaciones - Mad Fénix Games",meta:[{hid:"description",name:"description",content:"Notificaciones en Mad Fénix Games."}]}),this.setUserCookies();const{$api:e}=f();this.api=e,this.fetch();let t=this;window.addEventListener("keyup",function(n){t.fetch()})},methods:{removeItems(){this.items=null,window.document.getElementById("audioNotification").stop()},fetch(){this.api("/api/store/getLastProductOrders",{method:"GET"}).then(e=>{e.length>0&&(this.items=e,window.document.getElementById("audioNotification").play())}).catch(e=>e.message?this.serverMessage.setServerMessage(e.message):this.serverMessage.setServerMessage("Error.")),this.itemsInterval=setTimeout(this.fetch,6e4),this.itemsIntervalRemove=setTimeout(this.removeItems,15e3)},setUserCookies(){let e=a.get("token");if(e){this.user.setToken(e);let t=a.get("user");if(t)this.user.updateUser(JSON.parse(t));else{console.log("test");try{this.user.fetchUser()}catch{}}}}}},y={key:0,class:"min-h-screen flex items-center justify-center bg-green-600 p-4"},M={key:0},S={class:"w-[800px]"},b=["innerHTML"];function N(e,t,n,I,r,E){return r.user.user?(o(),i("div",y,[t[1]||(t[1]=s("audio",{id:"audioNotification"},[s("source",{src:_,type:"audio/ogg"})],-1)),r.items?(o(),i("div",M,[t[0]||(t[0]=s("div",{class:"w-full items-center text-center"},[s("img",{src:k,class:"mx-auto w-[250px]"})],-1)),(o(!0),i(g,null,x(r.items,u=>(o(),i("div",S,[s("div",{innerHTML:u,class:"text-5xl font-bold text-white",style:{"text-shadow":"-4px -4px 0 black, 4px -4px 0 black, -4px  4px 0 black, 4px  4px 0 black"}},null,8,b)]))),256))])):c("",!0)])):c("",!0)}const B=h(w,[["render",N]]);export{B as default};
