import{_ as b}from"./JYaq8-bY.js";import{u as L,_ as T}from"./BaKTo_1p.js";import{u as M,a as A,b as H}from"./Br9E0i3q.js";import{_ as z,u as C,e as P,f as v,c as r,a as s,h as c,b as g,w as y,F as f,r as p,o as i,d as w,g as S,v as U}from"./Bg4yKTBV.js";const B={middleware:"auth",data(){return{polls:L(),user:M(),settings:A(),serverMessage:H(),customAnswers:[],currentListAnswers:[],api:null,perfil:null}},mounted(){C({title:"Influye - Mad Fénix Games",meta:[{hid:"description",name:"description",content:"Influye en Mad Fénix Games."}]}),this.setUserCookies(),this.user.token&&this.polls.fetchPolls(),this.setBackground();const{$api:t}=P();this.api=t,this.getPerfil()},computed:{eventos(){let t=[],e=null,n=null;if(this.polls&&this.polls.polls)for(let u=0;u<this.polls.polls.length;u++)e=this.polls.polls[u],!n||n.name!=e.name?t.push({name:e.name,polls:[e]}):t[t.length-1].polls.push(e),n=this.polls.polls[u];return t},nftCollections(){let t=[];if(this.perfil&&this.perfil.nfts)for(let e=0;e<this.perfil.nfts.length;e++)t.some(n=>n.nft_id===this.perfil.nfts[e].nft_id)||t.push({nft_id:this.perfil.nfts[e].nft_id,name:this.perfil.nfts[e].nft.name,short_description:this.perfil.nfts[e].nft.short_description,portrait_image:this.perfil.nfts[e].nft.portrait_image,featured_image:this.perfil.nfts[e].nft.featured_image});if(this.perfil&&this.perfil.nfts_hedera)for(let e=0;e<this.perfil.nfts_hedera.length;e++)t.some(n=>n.nft_id===this.perfil.nfts_hedera[e].nft_id)||t.push({nft_id:this.perfil.nfts_hedera[e].nft_id,name:this.perfil.nfts_hedera[e].nft.name,short_description:this.perfil.nfts_hedera[e].nft.short_description,portrait_image:this.perfil.nfts_hedera[e].nft.portrait_image,featured_image:this.perfil.nfts_hedera[e].nft.featured_image});return t}},methods:{setBackground(){document.getElementById("container-global").style.background="transparent url('/img/perfil/back_temp.jpg') no-repeat top center"},afterPerfil(t){this.perfil=t},getPerfil(){this.api("/api/profile/getUserProfile",{method:"POST"}).then(t=>this.afterPerfil(t)).catch(()=>this.logout())},countNFTsByid(t){let e=0;if(this.perfil&&this.perfil.nfts)for(let n=0;n<this.perfil.nfts.length;n++)this.perfil.nfts[n].nft_id==t&&(e+=1);if(this.perfil&&this.perfil.nfts_hedera)for(let n=0;n<this.perfil.nfts_hedera.length;n++)this.perfil.nfts_hedera[n].nft_id==t&&(e+=1);return e},vote(t,e){if(e&&!t.userAnswer&&t.active){let n=e;typeof e!="string"&&(n=e.description),this.api("/api/poll/answerPoll",{method:"POST",body:{poll_id:t.id,answer:n}}).then(u=>this.polls.fetchPolls()).catch(()=>this.logout())}},answerUser(t,e){let n="";return t.userAnswer&&e.description==t.userAnswer.answer&&(n=" - "+t.userAnswer.votes+"% tuyos"),n},setUserCookies(){let t=v.get("token");if(t){this.user.setToken(t);let e=v.get("user");if(e)this.user.updateUser(JSON.parse(e));else{console.log("test");try{this.user.fetchUser()}catch{}}}}}},N={key:0},F={class:"max-w-screen-xl px-4 pb-12 mx-auto md:pb-16 sm:px-6 lg:px-8"},V={class:"relative z-30 grid grid-cols-1 sm:grid-cols-12 items-center justify-center mx-auto text-center px-4 sm:px-16 lg:flex-row lg:text-left"},I={class:"sm:col-span-3 flex items-center py-6 sm:py-0 px-12 h-full text-2xl font-bold sm:text-4xl rounded-tr-3xl sm:rounded-tr-none rounded-tl-3xl sm:rounded-bl-3xl bg-madfenix-gris"},O={class:"font-extrabold tracking-tight text-white text-size-token-number text-center w-full"},E=["innerHTML"],R={key:1},D=["innerHTML"],G={class:"sm:col-span-7 px-3 sm:px-0 py-3 sm:py-0 flex items-center space-x-3 justify-center h-full bg-madfenix-azul sm:rounded-tr-3xl rounded-bl-3xl sm:rounded-bl-none rounded-br-3xl sm:mr-12 lg:justify-end"},J={class:"botones-tokens"},q={key:0,class:"w-full"},K={class:"relative rounded-tl-3xl rounded-br-3xl min-h-[150px] mx-3 mt-4 sm:mx-auto sm:w-2/3 bg-madfenix-gris border border-madfenix-naranja overflow-hidden"},Q=["src"],W={class:"relative sm:mx-auto sm:w-1/2 z-50 contenedor-botones-formularios"},X={class:"flex justify-center"},Y={class:"contenedor-boton-right-formularios"},Z={class:"max-w-screen-xl px-4 pt-12 mx-auto md:pt-16 sm:px-6 lg:px-8"},$=["innerHTML"],ee={class:"relative rounded-tl-3xl rounded-br-3xl min-h-[500px] mx-3 mt-12 sm:mx-auto sm:w-2/3 bg-madfenix-gris border border-madfenix-naranja overflow-hidden"},te=["src"],se={key:0,class:"overflow-y-auto h-[430px] mt-3"},ne=["innerHTML"],re=["innerHTML"],ie={class:"relative sm:mx-auto sm:w-1/2 z-50 contenedor-botones-formularios"},oe={class:"flex space-x-3 justify-center"},ae=["onClick","innerHTML"],le=["onClick"],de=["onClick"],fe=["onClick"];function ue(t,e,n,u,o,m){const _=b,k=b;return o.user.user&&o.perfil?(i(),r("div",N,[e[7]||(e[7]=s("h1",{class:"text-madfenix-naranja w-full text-center py-12"},"Influye",-1)),s("section",F,[s("div",V,[s("div",I,[s("h5",O,[o.perfil?(i(),r("span",{key:0,innerHTML:o.perfil.plumas},null,8,E)):(i(),r("span",R,"...")),o.perfil&&o.perfil.plumas_hedera?(i(),r("p",{key:2,innerHTML:o.perfil.plumas_hedera+" RED",class:"mt-4 text-xl"},null,8,D)):c("",!0)])]),e[5]||(e[5]=s("div",{class:"sm:col-span-2 flex items-center justify-center bg-madfenix-azul"},[s("img",{src:T,alt:"Plumas",class:"absolute z-50 h-1/2 sm:h-full"}),s("svg",{class:"inset-y-0 z-40 h-full text-madfenix-gris",preserveAspectRatio:"none",viewBox:"0 0 100 100",fill:"currentcolor"},[s("polygon",{points:"0,0 100,0 0,100"})])],-1)),s("div",G,[e[4]||(e[4]=s("h5",{class:"grow font-extrabold tracking-tight text-white text-size-token"}," Plumas ",-1)),s("div",J,[g(_,{to:"/canjear-cupon",class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer"},{default:y(()=>e[1]||(e[1]=[w(" Canjea un cupón ")])),_:1}),e[3]||(e[3]=s("br",null,null,-1)),g(_,{to:"/transfiere-plumas-a-hedera-previo1",class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer"},{default:y(()=>e[2]||(e[2]=[w(" Transfiere Plumas ")])),_:1})])])])]),m.nftCollections?(i(!0),r(f,{key:0},p(m.nftCollections,d=>(i(),r(f,{key:d.nft_id},[d.name=="Cronistas"?(i(),r("div",q,[s("div",K,[s("img",{src:d.featured_image,class:"absolute",style:{"min-width":"1100px",top:"50%",left:"50%",transform:"translate(-50%, -40%)"}},null,8,Q),e[6]||(e[6]=s("div",{class:"relative min-h-[150px] mb-0 p-6 z-50"},"   ",-1))]),s("div",W,[s("div",X,[s("div",Y,[g(k,{to:"/coleccion/?nft_id="+d.nft_id,class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer",innerHTML:d.name+" ("+m.countNFTsByid(d.nft_id)+")"},null,8,["to","innerHTML"])])])])])):c("",!0)],64))),128)):c("",!0),this.eventos?(i(!0),r(f,{key:1},p(this.eventos,(d,j)=>(i(),r("div",{class:"w-full",key:j},[s("div",Z,[s("h2",{class:"px-4 sm:px-16 text-madfenix-blanco text-center capitalize-first",innerHTML:d.name},null,8,$)]),d.polls?(i(!0),r(f,{key:0},p(d.polls,(l,x)=>(i(),r("div",{class:"w-full",key:l.id},[s("div",ee,[s("img",{src:l.featured_image,class:"absolute",style:{"min-width":"1100px",top:"50%",left:"50%",transform:"translate(-50%, -40%)"}},null,8,te),o.currentListAnswers[x]?(i(),r("div",se,[(i(!0),r(f,null,p(o.currentListAnswers[x],(a,h)=>(i(),r("div",{class:"relative w-full text-center mb-0 p-2 z-50 text-madfenix-blanco",key:h,innerHTML:"@"+a.username+": "+a.answer},null,8,ne))),128))])):(i(),r("div",{key:1,class:"absolute bottom-0 w-full mb-0 p-6 z-50 text-madfenix-blanco background-destino",innerHTML:l.description},null,8,re))]),s("div",ie,[s("div",oe,[l.answers&&l.answers!=""?(i(!0),r(f,{key:0},p(l.answers,(a,h)=>(i(),r("div",{key:h,class:"text-center"},[s("a",{onClick:me=>m.vote(l,a),class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer",innerHTML:a.description+"<br>("+a.votes+"%"+m.answerUser(l,a)+")"},null,8,ae)]))),128)):(i(),r(f,{key:1},[l.userAnswer?(i(),r(f,{key:0},[o.currentListAnswers[x]?(i(),r("a",{key:1,onClick:a=>o.currentListAnswers[x]=null,class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer",innerHTML:"Ocultar respuesta"},null,8,de)):(i(),r("a",{key:0,onClick:a=>o.currentListAnswers[x]=l.customAnswers,class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer",innerHTML:"Listar respuesta"},null,8,le))],64)):(i(),r(f,{key:1},[S(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>o.customAnswers[t.index]=a),class:"w-full text-madfenix-blanco text-center text-3xl rounded-tl-3xl rounded-br-3xl bg-madfenix-gris py-4 pl-10 pr-3 border-2 border-madfenix-gris focus:border-madfenix-naranja",placeholder:"Respuesta"},null,512),[[U,o.customAnswers[t.index]]]),s("a",{onClick:a=>m.vote(l,o.customAnswers[t.index]),class:"flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer",innerHTML:"Votar"},null,8,fe)],64))],64))])])]))),128)):c("",!0)]))),128)):c("",!0),e[8]||(e[8]=s("div",null," ",-1))])):c("",!0)}const ge=z(B,[["render",ue]]);export{ge as default};
