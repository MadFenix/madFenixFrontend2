import{u as g,a as p,b as h}from"./Nf_ULQDI.js";import{O as _,_ as x,E as v,u as f,h as b,F as u,o as a,c as i,a as t,G as s,M as T,N as M,d as k,L as l}from"./D6bX2HYE.js";const y=_("/img/el-luchador/portada.jpg"),L={middleware:"auth",data(){return{user:g(),settings:p(),serverMessage:h(),api:null,seasonDetails:null,route:v(),accountParameterToUrl:""}},mounted(){var e,c,m,r;this.setUserCookies(),this.setBackground(),this.accountParameterToUrl=this.route.params.account?this.route.params.account+"/":"",this.setConfigCookies(),f({title:"Temporada - "+((c=(e=this.user.config)==null?void 0:e.config)==null?void 0:c.name_ecosystem),meta:[{hid:"description",name:"description",content:"Temporada en "+((r=(m=this.user.config)==null?void 0:m.config)==null?void 0:r.name_ecosystem)}]});const{$api:n}=b();this.api=n,this.getSeasonDetails()},computed:{},methods:{setBackground(){document.getElementById("container-global").style.background="transparent url('/img/perfil/back_temp.jpg') no-repeat top center"},afterLogout(){u.remove("token"),u.remove("user"),this.user.setToken(""),this.user.setUserToNull(),this.user.removeUser(),setTimeout(()=>this.$router.push({path:"/"+this.accountParameterToUrl+"login"}),2e3)},logout(){this.api("/api/host/logout",{method:"POST"}).then(()=>this.afterLogout()).catch(()=>this.afterLogout())},afterSeasonDetails(n){this.seasonDetails=n},getSeasonDetails(){this.api("/api/host/season/seasonDetails",{method:"GET"}).then(n=>this.afterSeasonDetails(n)).catch(()=>this.logout())},canjearPremio(n){this.api("/api/host/season/redeemSeasonLvl",{method:"POST",body:{level:n}}).then(()=>this.getSeasonDetails()).catch(e=>e.message?e.message==="The given data was invalid."?this.serverMessage.setServerMessage("Datos inválidos."):e.response&&e.response._data&&e.response._data.message?this.serverMessage.setServerMessage(e.response._data.message):e.response&&e.response._data?this.serverMessage.setServerMessage(e.response._data):this.serverMessage.setServerMessage(e.message):e.response&&e.response._data&&e.response._data.message?this.serverMessage.setServerMessage(e.response._data.message):e.response&&e.response._data?this.serverMessage.setServerMessage(e.response._data):this.serverMessage.setServerMessage(e))},setConfigCookies(){let n=u.get(this.accountParameterToUrl.replace(/^\/+|\/+$/g,"")+"_config");if(n&&(n=JSON.parse(n)),n)this.user.setConfig(this.accountParameterToUrl,n);else try{this.user.fetchConfig(this.accountParameterToUrl)}catch{}},setUserCookies(){let n=u.get("token");if(n){this.user.setToken(n);let e=u.get("user");if(e)this.user.updateUser(JSON.parse(e));else{console.log("test");try{this.user.fetchUser()}catch{}}}}}},j={key:0},H={class:s("relative rounded-tl-3xl rounded-br-3xl min-h-[300px] mx-3 sm:m-auto sm:w-2/3 border border-[color:var(--blanco)] bg-[color:var(--gris)] overflow-hidden")},S={class:s("relative min-h-[300px] mb-0 p-6 z-50")},D={class:s("absolute w-full bottom-0 px-12 py-3")},C={class:s("flex items-end justify-end")},P=["innerHTML"],U={class:s("relative mx-3 sm:m-auto sm:w-2/3")},N={class:s("flex items-end justify-end title-season")},w=["innerHTML"],B=["innerHTML"],O=["innerHTML"],q={class:s("grid grid-cols-1 sm:grid-cols-2 gap-12 mx-3 sm:mx-auto sm:w-2/3 mt-12")},z={class:s("relative rounded-tr-3xl rounded-bl-3xl border-2 border-[color:var(--naranja)] bg-[color:var(--gris)] overflow-hidden")},E={class:s("p-6 pt-[50px] pb-[70px] relative z-50")},V={class:s("font-extrabold tracking-tight text-[color:var(--naranja)] w-full text-center lvl-season-reward")},A=["innerHTML"],F={class:s("text-4xl min-h-[200px] tracking-tight text-[color:var(--blanco)] sm:text-5xl w-full text-center")},G=["innerHTML"],J=["innerHTML"],I=["innerHTML"],K=["innerHTML"],Q=["innerHTML"],W=["innerHTML"],X={class:s("relative sm:mx-auto sm:w-1/2 z-50 contenedor-botones-formularios")},Y={class:s("flex justify-center")},Z={class:s("contenedor-boton-right-formularios")},$={key:0,class:s("flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-[color:var(--gris)] font-semibold bg-[color:var(--naranja)] leading-snug transition ease-in-out h-10 lg:h-14 duration-250 border-[color:var(--naranja)] border-2")},R={key:1,class:s("flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-[color:var(--gris)] font-semibold bg-[color:var(--naranja)] leading-snug transition ease-in-out h-10 lg:h-14 duration-250 border-[color:var(--naranja)] border-2")},ee=["onClick"],se={key:3,class:s("flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-[color:var(--gris)] font-semibold bg-[color:var(--naranja)] leading-snug transition ease-in-out h-10 lg:h-14 duration-250 border-[color:var(--naranja)] border-2")};function te(n,e,c,m,r,d){return r.seasonDetails&&r.user?(a(),i("div",j,[e[7]||(e[7]=t("h1",{class:s("text-[color:var(--naranja)] w-full text-center py-12")},"Temporada",-1)),t("div",H,[e[0]||(e[0]=t("img",{src:y,class:s("absolute"),style:{"min-width":"1100px",top:"50%",left:"50%",transform:"translate(-50%, -40%)"}},null,-1)),t("div",S,[t("div",D,[t("div",C,[t("h2",{class:s("mt-4 text-4xl font-extrabold text-[color:var(--blanco)] md:mt-5 sm:text-5xl md:text-6xl title-season"),innerHTML:r.seasonDetails.name},null,8,P)])])])]),t("div",U,[t("div",N,[t("p",{class:s("text-2xl font-medium tracking-tight text-white sm:text-3xl lg:text-4xl lg:leading-tight mt-4"),innerHTML:"Nivel: "+(r.seasonDetails.user_season_level??0)+"   "},null,8,w),t("p",{class:s("text-2xl font-medium tracking-tight text-white sm:text-3xl lg:text-4xl lg:leading-tight mt-4"),innerHTML:"Puntos: "+(r.seasonDetails.user_season_points??0)+"   "},null,8,B),t("p",{class:s("text-2xl font-medium tracking-tight text-white sm:text-3xl lg:text-4xl lg:leading-tight mt-4"),innerHTML:"Premium: "+(r.seasonDetails.user_season_premium?"Si":"No")},null,8,O)])]),t("div",q,[r.seasonDetails.seasonRewards?(a(!0),i(T,{key:0},M(r.seasonDetails.seasonRewards,o=>(a(),i("div",{key:o.id},[t("div",z,[t("div",E,[t("div",V,[e[1]||(e[1]=k(" Nivel: ")),t("span",{innerHTML:o.level},null,8,A)]),t("div",F,[t("span",{class:s("text-2xl sm:text-3xl"),innerHTML:o.required_points+" puntos"},null,8,G),e[2]||(e[2]=t("br",null,null,-1)),e[3]||(e[3]=t("span",{class:s("font-extrabold")},"Premio:",-1)),e[4]||(e[4]=t("br",null,null,-1)),o.oro?(a(),i("span",{key:0,innerHTML:o.oro+" oros"},null,8,J)):l("",!0),o.plumas?(a(),i("span",{key:1,innerHTML:o.plumas+" plumas"},null,8,I)):l("",!0),o.nft?(a(),i("span",{key:2,innerHTML:"1 Ítem "+o.nft.name+". Límite: "},null,8,K)):l("",!0),o.max_nft_rewards?(a(),i("span",{key:3,innerHTML:o.max_nft_rewards},null,8,Q)):l("",!0),o.custom_reward?(a(),i("span",{key:4,innerHTML:o.custom_reward},null,8,W)):l("",!0)])])]),t("div",X,[t("div",Y,[e[5]||(e[5]=t("div",{class:s("grow")},"   ",-1)),t("div",Z,[o.redeemed?(a(),i("a",$," Canjeado ")):o.required_points<r.seasonDetails.user_season_points&&!(r.seasonDetails.user_season_premium>0)&&!(o.level==1||o.level==5||o.level==10||o.level==15||o.level==20)?(a(),i("a",R," Necesitas el pase premium ")):o.required_points<r.seasonDetails.user_season_points?(a(),i("a",{key:2,onClick:oe=>d.canjearPremio(o.level),class:s("flex items-center w-full m-auto justify-center px-8 py-4 btn-madfenix text-[color:var(--gris)] font-semibold bg-[color:var(--naranja)] leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-[color:var(--naranja)] hover:bg-[color:var(--gris)] border-[color:var(--naranja)] border-2 cursor-pointer")}," Canjea el premio ",8,ee)):(a(),i("a",se," Por desbloquear "))]),e[6]||(e[6]=t("div",{class:s("grow")},"   ",-1))])])]))),128)):l("",!0)])])):l("",!0)}const ae=x(L,[["render",te]]);export{ae as _};
