import{u as x,a as _,b as v}from"./Br9E0i3q.js";import{_ as b,u as y,e as k,f as m,n as w,s as M,c as o,a as t,F as p,r as g,h as d,d as f,o as r,x as u}from"./Bg4yKTBV.js";const T={middleware:"auth",data(){return{user:x(),settings:_(),serverMessage:v(),api:null,storeDetails:null,showProductsModal:!1,imageItemsReveal:!1,videoNewItems:"/video/MadFenixLogoReveal.mp4",itemsPurchaseToShow:null}},mounted(){y({title:"Tienda - Mad Fénix",meta:[{hid:"description",name:"description",content:"Tienda en Mad Fénix."}],script:[{async:!0,src:"https://js.stripe.com/v3/buy-button.js"}]}),this.setUserCookies(),this.setBackground();const{$api:a}=k();this.api=a,this.getStoreDetails()},computed:{},methods:{revealImageItems(){this.imageItemsReveal=!0},setBackground(){document.getElementById("container-global").style.background="transparent url('/img/perfil/back_temp.jpg') no-repeat top center"},afterLogout(){m.remove("token"),m.remove("user"),this.user.setToken(""),this.user.setUserToNull(),this.user.removeUser(),setTimeout(()=>this.$router.push({path:"/login"}),2e3)},logout(){this.api("/api/logout",{method:"POST"}).then(()=>this.afterLogout()).catch(()=>this.afterLogout())},afterStoreDetails(a){this.storeDetails=a},getStoreDetails(){this.api("/api/store/details",{method:"GET"}).then(a=>this.afterStoreDetails(a)).catch(()=>this.logout())},openNewItems(a){a.nfts.length>0?(this.videoNewItems=a.video_purchase,this.itemsPurchaseToShow=a,a.video_purchase?this.imageItemsReveal=!1:this.imageItemsReveal=!0,this.showProductsModal=!0,a.video_purchase&&w(()=>{document.getElementById("video-storemadfenix").play()})):this.$router.push({path:"/perfil"}),this.getStoreDetails()},validateProduct(a){this.api("/api/store/validateProductOrder",{method:"POST",body:{product_order_id:a.id}}).then(e=>this.openNewItems(e)).catch(e=>e.message?e.message==="The given data was invalid."?this.serverMessage.setServerMessage("Datos inválidos."):e.response&&e.response._data&&e.response._data.message?this.serverMessage.setServerMessage(e.response._data.message):e.response&&e.response._data?this.serverMessage.setServerMessage(e.response._data):this.serverMessage.setServerMessage(e.message):e.response&&e.response._data&&e.response._data.message?this.serverMessage.setServerMessage(e.response._data.message):e.response&&e.response._data?this.serverMessage.setServerMessage(e.response._data):this.serverMessage.setServerMessage(e))},buyProduct(a,e,c){this.api("/api/store/addProductToOrder",{method:"POST",body:{product_id:a}}).then(i=>{(e>0||c>0)&&this.validateProduct(i)}).catch(i=>i.message?i.message==="The given data was invalid."?this.serverMessage.setServerMessage("Datos inválidos."):i.response&&i.response._data&&i.response._data.message?this.serverMessage.setServerMessage(i.response._data.message):i.response&&i.response._data?this.serverMessage.setServerMessage(i.response._data):this.serverMessage.setServerMessage(i.message):i.response&&i.response._data&&i.response._data.message?this.serverMessage.setServerMessage(i.response._data.message):i.response&&i.response._data?this.serverMessage.setServerMessage(i.response._data):this.serverMessage.setServerMessage(i))},getPrice(a){return a.price_oro>0?'<span class="text-size-token-store">'+a.price_oro+"</span> oros":'<span class="text-size-token-store">'+a.price_plumas+"</span> plumas"},setUserCookies(){let a=m.get("token");if(a){this.user.setToken(a);let e=m.get("user");if(e)this.user.updateUser(JSON.parse(e));else{console.log("test");try{this.user.fetchUser()}catch{}}}}}},P={key:0},S={class:"relative z-30 grid grid-cols-1 sm:grid-cols-12 items-center justify-center mx-auto text-center px-4 sm:px-16 lg:flex-row lg:text-left"},I={class:"sm:col-span-3 flex items-center py-6 sm:py-0 px-12 h-full text-2xl rounded-tl-3xl rounded-tr-3xl sm:rounded-tr-none bg-madfenix-gris border border-madfenix-naranja sm:border-r-0 font-bold sm:text-4xl"},H=["src","title","alt"],L={class:"sm:col-span-9 px-3 sm:px-0 py-3 sm:py-0 sm:flex sm:items-center space-x-3 justify-center h-full rounded-br-3xl rounded-bl-3xl sm:rounded-bl-none bg-madfenix-gris border border-madfenix-naranja sm:border-l-0 sm:mr-12 lg:justify-end"},R={class:"grow font-extrabold tracking-tight"},U={class:"font-extrabold tracking-tight text-madfenix-naranja text-4xl sm:text-5xl"},E=["innerHTML"],N=["innerHTML"],z={class:"botones-tokens"},V={key:6,class:"flex cursor-pointer items-center justify-center w-auto px-8 py-4 text-base font-semibold leading-snug transition ease-in-out bg-white rounded-full h-14 duration-250 text-dark-900"},D=["onClick"],O=["innerHTML"],j={key:1,tabindex:"-1","aria-hidden":"true",class:"overflow-y-auto overflow-x-hidden bg-madfenix-gris bg-opacity-50 fixed top-0 right-0 left-0 z-50 w-full h-modal md:h-full"},C={class:"flex items-center justify-center p-4 w-full h-screen"},F={class:"bg-madfenix-gris text-madfenix-blanco rounded-lg shadow border border-madfenix-blanco"},B={class:"flex justify-between items-start p-4 rounded-t border-b border-madfenix-blanco"},G={class:"w-full p-3 overflow-y-auto",style:{height:"500px","max-width":"700px"}},A=["src"],X={key:1,class:"grid grid-cols-2 md:grid-cols-3 gap-2"},Q={class:"relative rounded-tr-3xl rounded-bl-3xl border-2 border-madfenix-naranja bg-madfenix-gris overflow-hidden"},J=["src","alt","title"],K=["innerHTML"];function W(a,e,c,i,n,h){const l=M("stripe-buy-button");return n.storeDetails?(r(),o("div",P,[e[6]||(e[6]=t("section",{class:"px-4 py-12 md:py-16 sm:px-6 lg:px-8"},[t("div",{class:"max-w-screen-xl mx-auto"},[t("div",{class:"w-full max-w-3xl mx-auto text-center lg:max-w-5xl"},[t("h1",{class:"mt-4 text-4xl font-extrabold text-madfenix-naranja md:mt-5 sm:text-5xl md:text-6xl",innerHTML:"Pasa al siguiente nivel"})])])],-1)),n.storeDetails.products?(r(!0),o(p,{key:0},g(n.storeDetails.products,s=>(r(),o("section",{class:"max-w-screen-xl px-4 py-12 mx-auto md:py-16 sm:px-6 lg:px-8",key:s.id},[t("div",S,[t("div",I,[t("img",{src:s.image,title:s.name,alt:s.name,class:"inset-y-0 z-40 h-full"},null,8,H)]),t("div",L,[t("div",R,[t("h5",U,[t("span",{innerHTML:s.name},null,8,E)]),s.short_description?(r(),o("p",{key:0,class:"text-madfenix-blanco text-xl",innerHTML:s.short_description},null,8,N)):d("",!0)]),t("div",z,[s.price_fiat>0&&s.price_fiat==5?(r(),u(l,{key:0,"buy-button-id":"buy_btn_1PAYYpHruUfPE2wuw5Mhazx8","publishable-key":"pk_live_51PAXsOHruUfPE2wuT1MTCc3LMcanaF77ZykWh93fUu8whnI6GLIFVfPcBSJVNTzGSiQtchKVsRu2kiziQlOD44XH006ERR5INg","customer-email":n.user.email},null,8,["customer-email"])):s.price_fiat>0&&s.price_fiat==10?(r(),u(l,{key:1,"buy-button-id":"buy_btn_1PAaDhHruUfPE2wuOkz0bx5C","publishable-key":"pk_live_51PAXsOHruUfPE2wuT1MTCc3LMcanaF77ZykWh93fUu8whnI6GLIFVfPcBSJVNTzGSiQtchKVsRu2kiziQlOD44XH006ERR5INg","customer-email":n.user.email},null,8,["customer-email"])):s.price_fiat>0&&s.price_fiat==20?(r(),u(l,{key:2,"buy-button-id":"buy_btn_1PAaEuHruUfPE2wu6DXK5KYT","publishable-key":"pk_live_51PAXsOHruUfPE2wuT1MTCc3LMcanaF77ZykWh93fUu8whnI6GLIFVfPcBSJVNTzGSiQtchKVsRu2kiziQlOD44XH006ERR5INg","customer-email":n.user.email},null,8,["customer-email"])):s.price_fiat>0&&s.price_fiat==40?(r(),u(l,{key:3,"buy-button-id":"buy_btn_1PAaI3HruUfPE2wu9m6H5vGp","publishable-key":"pk_live_51PAXsOHruUfPE2wuT1MTCc3LMcanaF77ZykWh93fUu8whnI6GLIFVfPcBSJVNTzGSiQtchKVsRu2kiziQlOD44XH006ERR5INg","customer-email":n.user.email},null,8,["customer-email"])):s.price_fiat>0&&s.price_fiat==80?(r(),u(l,{key:4,"buy-button-id":"buy_btn_1PAaHCHruUfPE2wua82AVGzY","publishable-key":"pk_live_51PAXsOHruUfPE2wuT1MTCc3LMcanaF77ZykWh93fUu8whnI6GLIFVfPcBSJVNTzGSiQtchKVsRu2kiziQlOD44XH006ERR5INg","customer-email":n.user.email},null,8,["customer-email"])):s.price_fiat>0&&s.price_fiat==160?(r(),u(l,{key:5,"buy-button-id":"buy_btn_1PAaJKHruUfPE2wuU9Jq0Nu9","publishable-key":"pk_live_51PAXsOHruUfPE2wuT1MTCc3LMcanaF77ZykWh93fUu8whnI6GLIFVfPcBSJVNTzGSiQtchKVsRu2kiziQlOD44XH006ERR5INg","customer-email":n.user.email},null,8,["customer-email"])):s.price_fiat>0?(r(),o("a",V," Próximamente ")):(r(),o("a",{key:7,onClick:Z=>h.buyProduct(s.id,s.price_oro,s.price_plumas),class:"w-full m-auto justify-center px-8 py-4 btn-madfenix text-madfenix-gris font-semibold bg-madfenix-naranja leading-snug transition ease-in-out h-10 lg:h-14 duration-250 hover:text-madfenix-naranja hover:bg-madfenix-gris border-madfenix-naranja border-2 cursor-pointer"},[e[2]||(e[2]=f(" Comprar por ")),t("span",{innerHTML:h.getPrice(s)},null,8,O)],8,D))])])])]))),128)):d("",!0),n.showProductsModal?(r(),o("div",j,[t("div",C,[t("div",F,[t("div",B,[e[4]||(e[4]=t("h3",{class:"text-xl font-semibold"}," ¡Tus nuevos ítems! ",-1)),t("button",{type:"button",onClick:e[0]||(e[0]=s=>{n.showProductsModal=!1,n.imageItemsReveal=!1}),class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white"},e[3]||(e[3]=[t("svg",{"aria-hidden":"true",class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),t("span",{class:"sr-only"},"Cerrar pantalla",-1)]))]),t("div",G,[n.imageItemsReveal?d("",!0):(r(),o("video",{key:0,id:"video-storemadfenix",class:"rounded rounded-3xl border border-2 border-madfenix-gris",playsinline:"",onEnded:e[1]||(e[1]=s=>h.revealImageItems())},[t("source",{src:n.videoNewItems,type:"video/mp4"},null,8,A),e[5]||(e[5]=f(" Tu navegador no soporta el video. "))],32)),n.imageItemsReveal&&n.itemsPurchaseToShow?(r(),o("div",X,[(r(!0),o(p,null,g(n.itemsPurchaseToShow.nfts,s=>(r(),o("div",{key:s.id},[t("div",Q,[t("img",{src:s.image,style:{width:"100%"},alt:s.name,title:s.name},null,8,J),t("div",{class:"px-6 mt-3 mb-10 relative z-50 w-full text-center text-madfenix-blanco",innerHTML:s.name},null,8,K)])]))),128))])):d("",!0)])])])])):d("",!0)])):d("",!0)}const $=b(T,[["render",W]]);export{$ as default};
